(function(e){if(!e.seajs){var t=e.seajs={version:"2.2.3"},i=t.data={},a=F("Object"),l=F("String"),d=Array.isArray||F("Array"),s=F("Function"),o=F("Undefined"),r=0,n=i.events={};t.on=function(e,i){return(n[e]||(n[e]=[])).push(i),t},t.off=function(e,a){if(!e&&!a)return n=i.events={},t;var l=n[e];if(l)if(a)for(var d=l.length-1;d>=0;d--)l[d]===a&&l.splice(d,1);else delete n[e];return t};var c,p=t.emit=function(e,i){var a,l=n[e];if(l)for(l=l.slice();a=l.shift();)a(i);return t},_=/[^?#]*\//,u=/\/\.\//g,h=/\/[^\/]+\/\.\.\//,f=/([^:\/])\/\//g,g=/^([^\/:]+)(\/.+)$/,x=/{([^{]+)}/g,b=/^\/\/.|:\//,m=/^.*?\/\/.*?\//,y=document,v=R(y.URL),w=y.scripts,k=y.getElementById("seajsnode")||w[w.length-1],A=R(((c=k).hasAttribute?c.src:c.getAttribute("src",4))||v);t.resolve=function(e,t){if(!e)return"";var a,d,o;e=function(e){var t=i.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(x,function(e,i){return l(t[i])?t[i]:e})),e}(e=function(e){var t,a=i.paths;return a&&(t=e.match(g))&&l(a[t[1]])&&(e=a[t[1]]+t[2]),e}(e=function(e){var t=i.alias;return t&&l(t[e])?t[e]:e}(e))),d=(a=e).length-1;var r=X(e="#"===(o=a.charAt(d))?a.substring(0,d):".js"===a.substring(d-2)||a.indexOf("?")>0||".css"===a.substring(d-3)||"/"===o?a:a+".js",t);return r=function(e){var t=i.map,a=e;if(t)for(var l=0,d=t.length;l<d;l++){var o=t[l];if((a=s(o)?o(e)||e:e.replace(o[0],o[1]))!==e)break}return a}(r)};var S,z,T=y.head||y.getElementsByTagName("head")[0]||y.documentElement,j=T.getElementsByTagName("base")[0],M=/\.css(?:\?|$)/i,E=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;t.request=function(e,t,a,l){var d=M.test(e),s=y.createElement(d?"link":"script");a&&(s.charset=a),o(l)||s.setAttribute("crossorigin",l),function(e,t,a,l){var d="onload"in e;function s(){e.onload=e.onerror=e.onreadystatechange=null,a||i.debug||T.removeChild(e),e=null,t()}!a||!E&&d?d?(e.onload=s,e.onerror=function(){p("error",{uri:l,node:e}),s()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&s()}:setTimeout(function(){!function e(t,i){var a,l=t.sheet;if(E)l&&(a=!0);else if(l)try{l.cssRules&&(a=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(a=!0)}setTimeout(function(){a?i():e(t,i)},20)}(e,t)},1)}(s,t,d,e),d?(s.rel="stylesheet",s.href=e):(s.async=!0,s.src=e),S=s,j?T.insertBefore(s,j):T.appendChild(s),S=null};var P,L=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,C=/\\\\/g,O=t.cache={},I={},D={},Y={},B=U.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};U.prototype.resolve=function(){for(var e=this.dependencies,t=[],i=0,a=e.length;i<a;i++)t[i]=U.resolve(e[i],this.uri);return t},U.prototype.load=function(){if(!(this.status>=B.LOADING)){this.status=B.LOADING;var e=this.resolve();p("load",e);for(var t,i=this._remain=e.length,a=0;a<i;a++)(t=U.get(e[a])).status<B.LOADED?t._waitings[this.uri]=(t._waitings[this.uri]||0)+1:this._remain--;if(0!==this._remain){var l={};for(a=0;a<i;a++)(t=O[e[a]]).status<B.FETCHING?t.fetch(l):t.status===B.SAVED&&t.load();for(var d in l)l.hasOwnProperty(d)&&l[d]()}else this.onload()}},U.prototype.onload=function(){this.status=B.LOADED,this.callback&&this.callback();var e,t,i=this._waitings;for(e in i)i.hasOwnProperty(e)&&((t=O[e])._remain-=i[e],0===t._remain&&t.onload());delete this._waitings,delete this._remain},U.prototype.fetch=function(e){var a=this.uri;this.status=B.FETCHING;var l={uri:a};p("fetch",l);var d=l.requestUri||a;function o(){t.request(l.requestUri,l.onRequest,l.charset,l.crossorigin)}d&&!D[d]?I[d]?Y[d].push(this):(I[d]=!0,Y[d]=[this],p("request",l={uri:a,requestUri:d,onRequest:function(){delete I[d],D[d]=!0,P&&(U.save(a,P),P=null);var e,t=Y[d];delete Y[d];for(;e=t.shift();)e.load()},charset:s(i.charset)?i.charset(d):i.charset,crossorigin:s(i.crossorigin)?i.crossorigin(d):i.crossorigin}),l.requested||(e?e[l.requestUri]=o:o())):this.load()},U.prototype.exec=function(){var e=this;if(e.status>=B.EXECUTING)return e.exports;e.status=B.EXECUTING;var t=e.uri;function i(e){return U.get(i.resolve(e)).exec()}i.resolve=function(e){return U.resolve(e,t)},i.async=function(e,a){return U.use(e,a,t+"_async_"+H()),i};var a=e.factory,l=s(a)?a(i,e.exports={},e):a;return void 0===l&&(l=e.exports),delete e.factory,e.exports=l,e.status=B.EXECUTED,p("exec",e),l},U.resolve=function(e,i){var a={id:e,refUri:i};return p("resolve",a),a.uri||t.resolve(a.id,i)},U.define=function(e,t,i){var a,l,o=arguments.length;1===o?(i=e,e=void 0):2===o&&(i=t,d(e)?(t=e,e=void 0):t=void 0),!d(t)&&s(i)&&(a=i.toString(),l=[],a.replace(C,"").replace(L,function(e,t,i){i&&l.push(i)}),t=l);var r={id:e,uri:U.resolve(e),deps:t,factory:i};if(!r.uri&&y.attachEvent){var n=function(){if(S)return S;if(z&&"interactive"===z.readyState)return z;for(var e=T.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var i=e[t];if("interactive"===i.readyState)return z=i}}();n&&(r.uri=n.src)}p("define",r),r.uri?U.save(r.uri,r):P=r},U.save=function(e,t){var i=U.get(e);i.status<B.SAVED&&(i.id=t.id||e,i.dependencies=t.deps||[],i.factory=t.factory,i.status=B.SAVED)},U.get=function(e,t){return O[e]||(O[e]=new U(e,t))},U.use=function(t,i,a){var l=U.get(a,d(t)?t:[t]);l.callback=function(){for(var t=[],a=l.resolve(),d=0,s=a.length;d<s;d++)t[d]=O[a[d]].exec();i&&i.apply(e,t),delete l.callback},l.load()},U.preload=function(e){var t=i.preload,a=t.length;a?U.use(t,function(){t.splice(0,a),U.preload(e)},i.cwd+"_preload_"+H()):e()},t.use=function(e,a){return U.preload(function(){U.use(e,a,i.cwd+"_use_"+H())}),t},U.define.cmd={},e.define=U.define,t.Module=U,i.fetchedList=D,i.cid=H,t.require=function(e){var t=U.get(U.resolve(e));return t.status<B.EXECUTING&&(t.onload(),t.exec()),t.exports};var V,N;i.base=(A.match(/^(.+?\/)(\?\?)?(seajs\/)+/)||["",A])[1],i.dir=A,i.cwd=v,i.charset="utf-8",i.history={},i.preload=(V=[],N=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),(N+=" "+y.cookie).replace(/(seajs-\w+)=1/g,function(e,t){V.push(t)}),V),t.config=function(e){for(var l in e){var s=e[l],o=i[l];if(i.history[l]=i.history[l]||[],i.history[l].push(K(s)),o&&a(o))for(var r in s)o[r]=s[r];else d(o)?s=o.concat(s):"base"===l&&("/"!==s.slice(-1)&&(s+="/"),s=X(s)),i[l]=s}return p("config",e),t}}function F(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function H(){return r++}function R(e){return e.match(_)[0]}function X(e,t){var a,l=e.charAt(0);if(b.test(e))a=e;else if("."===l)a=function(e){for(e=e.replace(u,"/");e.match(h);)e=e.replace(h,"/");return e=e.replace(f,"$1/")}((t?R(t):i.cwd)+e);else if("/"===l){var d=i.cwd.match(m);a=d?d[0]+e.substring(1):e}else a=i.base+e;return 0===a.indexOf("//")&&(a=location.protocol+a),a}function U(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function K(e){if(a(e)){var t={};for(var i in e)t[i]=e[i];return t}return e}})(this),define("magix",()=>{let e=0,t=[],i=window,a=document,l=setTimeout,d=encodeURIComponent;function s(){}let o=JSON.stringify,r=a.body,n=Date.now,c="\x1e",p="prototype",_=Object[p].toString,u=e=>_.call(e).slice(8,-1),h=e=>"Object"==u(e),f=Array.isArray,g=t=>(t||"mx_")+e++,x=e=>a.getElementById(e),b=g(),m={rootId:g(),defaultView:b,error(e){throw e}},y=e=>!e||"object"!=typeof e,v=(e,t,i)=>{if(e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i},{assign:w,keys:k,hasOwnProperty:A}=Object,S=a.head,z=a.createElement("div"),T=z.getAttribute,j=(e,t)=>T.call(e,t),M=(e,t)=>{t&&!M[e]&&(M[e]=1,z.innerHTML=`<style>${t}`,S.appendChild(z.firstChild))},E=(e,i,a,l,d)=>{for(d of(i=i||t,f(e)||(e=[e]),f(i)||(i=[i]),e))try{l=d&&d.apply(a,i)}catch(e){m.error(e)}return l},P=(e,t)=>e&&A.call(e,t),L=(e,t)=>{let i,a;if(y(t))(i=t+"")[0]==c&&P(e,i)&&(t=e[i]);else for(i in t)a=t[i],a=L(e,a),t[i]=a;return t},C=(e,t)=>t.a-e.a||t.b-e.b;function O(e,t,i,a){(a=this).a=[],a.b=t||5,a.c=a.b+(e||20),a.d=i}w(O[p],{get(t){let i=this.a[c+t];return i&&(i.a++,i.b=e++,i=i.c),i},set(t,i){let a=this,l=a.a,d=c+t,s=l[d],o=a.b;if(!s){if(l.length>=a.c)for(l.sort(C);o--;)(s=l.pop()).a>0&&a.del(s.o);s={d:t},l.push(s),l[d]=s}s.c=i,s.a=1,s.b=e++},del(e){e=c+e;let t=this.a,i=t[e],a=this.d;i&&(i.a=-1,i.c="",delete t[e],a&&E(a,i.d))},has(e){return P(this.a,c+e)}});let I,D,Y=(e,t)=>{if(t&&e&&1==e.nodeType)return e.matches(t)},B=[],V=()=>!0,N=()=>!1,F={preventDefault:"isDefaultPrevented",stopPropagation:"isPropagationStopped"},H=(e,t,i,a,l,d)=>{let s={a:a,b:i,c:t,d:e,e(t){t=(e=>{if(!e.isDefaultPrevented){for(let t in F){let i=F[t],a=e[t];e[t]=((...t)=>(e[i]=V,a&&a.apply(e,t))),e[i]=N}(void 0!==e.defaultPrevented?e.defaultPrevented:"returnValue"in e?!1===e.returnValue:e.getPreventDefault&&e.getPreventDefault())&&(e.isDefaultPrevented=V)}return e})(t),a?(t.eventTarget=e,E(i,t,d)):i(t)}};B.push(s),e.addEventListener(t,s.e,l)},R=(e,t,i,a,l)=>{for(let d,s=B.length;s--;)if((d=B[s]).c==t&&d.a==a&&d.d==e&&d.b===i){B.splice(s,1),e.removeEventListener(t,d.e,l);break}},X=/[#?].*$/,U=/([^=&?\/#]+)=?([^&#?]*)/g,K=/(?!^)=|&/,W=new O,G=(e,t,i)=>{try{i=decodeURIComponent(i)}catch(e){}I[t]=i},q=e=>{let t,i=W.get(e);return i||(I={},t=e.replace(X,""),e==t&&K.test(t)&&(t=""),e.replace(t,"").replace(U,G),W.set(e,i={a:t,b:I})),{path:i.a,params:w({},i.b)}},J=new O,Z=(e,t,i)=>(J.has(e)?i=J.get(e):(i=E(Function(`return ${e}`)),e.indexOf(c)>-1?L(t,i):J.set(e,i)),i),Q=(e,t)=>{if(e){let i=[];b==e?(D||(D=tt.extend()),t(D)):seajs.use(e,(...e)=>{for(let t of e)i.push(t&&t.__esModule&&t.default||t);t&&t(...i)})}else t()};function $(){}let ee=(e,t,i,a,l)=>($[p]=t[p],l=new $,w(l,i),w(e,a),l.constructor=e,e[p]=l,e),te=e=>e;let ie,ae={fire(e,t,i,a){let l,d,s,o,r=this,n=r[c+e];if(t||(t={}),t.type=e,n)for(d=(l=n.length)-1;l--;)(o=n[s=a?l:d-l]).f?(o.x=1,E(o.f,t,r),o.x=""):o.x||(n.splice(s,1),d--);return(n=r[`on${e}`])&&E(n,t,r),i&&r.off(e),r},on(e,t){let i=c+e;return(this[i]||(this[i]=[])).push({f:t}),this},off(e,t){let i,a=c+e,l=this,d=l[a];if(t){if(d)for(i of d)if(i.f==t){i.f="";break}}else delete l[a],delete l[`on${e}`];return l}},le={},de=w({get:e=>e?le[e]:le,set(e){w(le,e)}},ae),se={},oe=(e,t,i,a)=>{a=(a=(a=se[e])&&a.a)?a.a:{},t.indexOf(c)>0&&L(a,i)},re=(e,t)=>{P(se,e)||(se[e]=t,pe.fire("add",{vframe:t}))},ne=(e,t,i)=>{for(t=e.c;t.length;)(i=t.shift()).r||e.invoke(i.n,i.a),delete t[i.k]},ce=e=>e.b||(e.b=g());function pe(e,t){let i=this,a=ce(e);i.id=a,i.root=e,i.pId=t,i.b={},i.d=1,i.c=[],re(a,i)}w(pe,{all:()=>se,get:e=>se[e.b]},ae),w(pe[p],{mountView(e,t){let i,a,l,d,s,o=this,{id:r,root:n,pId:c}=o;!o.e&&n&&(o.e=1,o.f=n.innerHTML),o.unmountView(),i=q(e||""),l=i.path,n&&l&&(o.path=e,d=i.params,oe(c,e,d),o.g=l,w(d,t),a=o.d,Q(l,e=>{if(a==o.d){if(!e)return m.error(Error(`${r} cannot load:${l}`));s=et(e),l=new e(r,n,o,d,s),o.a=l,Je(l),E(l.init,d,l),l.g(),l.tmpl||(o.e=0,l.h||l.endUpdate())}}))},unmountView(){let e=this,{a:t,id:i,root:a}=e;e.c=[],t&&(e.unmountZone(),e.a=0,t.d>0&&(t.d=0,delete ge[i],delete xe[i],t.fire("destroy",0,1,1),We(t,1),Je(t,1),t.owner=t.root=null),t.d--,a&&e.e&&(a.innerHTML=e.f)),e.d++},mountVframe(e,t,i){let a,l=this,d=l.id,s=l.b,o=ce(e);return(a=se[o])||(P(s,o)||(l.h=0),s[o]=o,a=new pe(e,d)),a.mountView(t,i),a},mountZone(e){let t,i=this,a=(e=e||i.root).querySelectorAll("[mx-view]");for(t of a)t.a||(t.a=1,i.mountVframe(t,j(t,"mx-view")))},unmountVframe(e,t){let i,a;var l,d;e=e?this.b[t?e:e.b]:this.id,(i=se[e])&&(i.unmountView(),a=i.pId,(d=se[l=e])&&(delete se[l],d.root.a=0,pe.fire("remove",{vframe:d}),d.id=d.root=d.pId=d.b=null),(i=se[a])&&P(i.b,e)&&(delete i.b[e],i.h=0))},unmountZone(e){let t,i,a,l=this;for(t in l.b)(a=e?(i=se[t])&&v(i.root,e):1)&&l.unmountVframe(t,1)},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=se[t.pId];return t},children(e){return(e=this).h||(e.h=k(e.b))},invoke(e,t){let i,a,l,d,s,o=this.c;return(a=this.a)&&a.h?i=(l=a[e])&&E(l,t,a):((d=o[s=c+e])&&(d.r=t===d.a),d={n:e,a:t,k:s},o.push(d),o[s]=d),i}});let _e=new O(30,10),ue=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,he={},fe={},ge={},xe={},be=0,me=(e,i)=>{let a,l,d,s,o,n,c=[],p=e,_=j(e,`mx-${i}`),u=[],h="#",f=0;if(_&&((o=_e.get(_))||(o={v:(o=_.match(ue)||t)[1],n:o[2],i:o[3]},_e.set(_,o)),o=w({},o,{r:_})),o&&!o.v||fe[i]){if((d=xe[l=p.c])&&1==d[p.d]&&(n=1,h=l),!n){for(u.push(p);p!=r&&(p=p.parentNode);){if(se[l=p.b]||(d=xe[l=p.c])&&1==d[p.d]){h=l;break}u.push(p)}for(_ of u)(l=xe[h])||(l=xe[h]={}),l[d=_.d||(_.d=++be)]=1,_.c=h}p=e.b,se[p]&&(f=h=p);do{if((a=se[h])&&(n=a.a)){if(s=(d=n.i)[i])for(p=s.length;p--;)d={r:l=s[p],v:h,n:l},l?!f&&Y(e,l)&&c.push(d):f&&c.unshift(d);if(n.tmpl&&!f)break;f=0}}while(a&&(h=a.pId))}return o&&c.push(o),c},ye=e=>{let t,i,a,l,d,s,o,n,{target:p,type:_}=e,u=[];for(;p!=r;){if((t=me(p,_)).length){u=[];for(let{v:i,r:r,n:u,i:h}of t){if(o!=i){if(o&&e.isPropagationStopped())break;o=i}(l=(a=se[i])&&a.a)?l.h&&(s=l[d=u+c+_])&&(e.eventTarget=p,n=h?Z(h,l.a):{},e.params=n,E(s,e,l)):e.stopPropagation()}}if((i=ge[s=p.c])&&(i=i[p.d])&&i[_]||e.isPropagationStopped()){u.length&&u.push(s);break}o=p.b,se[o]&&u.push(o),u.push(p),p=p.parentNode||r}if(s=u.length)for(i="#";s--;)(l=u[s]).nodeType?((t=ge[i])||(t=ge[i]={}),(n=t[o=l.d||(l.d=++be)])||(n=t[o]={}),n[_]=1):i=l},ve=(e,t,i)=>{let a=0|he[e],l=i?-1:1;a&&i!==a||(i?R:H)(r,e,ye),he[e]=a+l,t&&(fe[e]=(0|fe[e])+l)};let we={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},ke=/[&<>"'\`]/g,Ae=e=>""+(null==e?"":e),Se=e=>`&${we[e]};`,ze=e=>Ae(e).replace(ke,Se),Te={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},je=e=>Te[e],Me=/[!')(*]/g,Ee=e=>d(Ae(e)).replace(Me,je),Pe=/[\\'"]/g,Le=e=>Ae(e).replace(Pe,"\\$&"),Ce=(e,t,i,a)=>{for(a=e[c];--a;)if(e[i=c+a]===t)return i;return e[i=c+e[c]++]=t,i},Oe=(e,t)=>{let i,a,l=e.j,d=e.k,s=e.owner,o=e.id,r={a:[]},n=e.e,c=e.a,p=i=>{t.a<t.length?Oe(e,t):(r=t.slice(),t.a=t.length=0,i&&e.fire("domready"),E(r))};if(t.a=t.length,e.k=0,e.j={},d&&e.d>0&&(i=e.tmpl)){for(a of(e.fire("dompatch"),delete ge[o],delete xe[o],a=i(n,Ie,o,c,Ae,Ee,Ce,Le,f,w),Re(e.root,e.l,a,r,s,l),e.l=a,r.a))a.g();i&&e.endUpdate(),p(1)}else p()},Ie=(e,i,a,l)=>{let d;if(e){a=a||{};let s,o,r,n,c,p,_="",u={},h="<"+e,f="",g=[];if(i)for(n of i)r=n.a,n.b==Be&&(r=r?ze(r):" "),f+=r,p&&n.b==Be&&p.b==Be?p.a+=n.a:(n.d&&(u[n.d]=(u[n.d]||0)+1),n.e&&(s=1),p=n,g.push(n));for(o in a)!1!==(r=a[o])&&null!=r?(!0===r&&(r=""),"id"==o?_=r:"mx-view"==o&&r&&!_?_=q(r).path:"mxs"==o?(_||(_=r),g=t):"mxv"==o&&(s=1),"value"==o&&e==De&&(f=r),a[o]=r,h+=` ${o}="${ze(r)}"`):delete a[o];c=h,d={a:h+=l?"/>":`>${f}</${e}>`,c:f,d:_,b:e,e:s||P(Ye,e),f:c,g:a,h:g,i:u,j:l}}else d={b:a?c:Be,a:i+""};return d},De="textarea",Ye={input:{value:1,checked:1},[De]:{value:1},option:{selected:1}};let Be=e;let Ve="http://www.w3.org/",Ne={svg:`${Ve}2000/svg`,math:`${Ve}1998/Math/MathML`},Fe=(e,t,i,a,l)=>{let d,s,o=Ye[t.b],r=i.g,n=t.g;if(l){if(t)for(d in n)P(o,d)||P(r,d)||(a.b=1,e.removeAttribute(d));for(d in r)P(o,d)||(s=r[d],t&&n[d]===s||(a.b=1,e.setAttribute(d,s)))}for(d in o)s=P(r,d)?"value"!=d||r[d]:"value"==d&&"",e[d]!=s&&(a.b=1,e[d]=s)},He=(e,t,i)=>{let l,d=e.b;return d==Be?l=a.createTextNode(e.a):(l=a.createElementNS(Ne[d]||t.namespaceURI,d),Fe(l,0,e,i,1),e.c&&(l.innerHTML=e.c)),l},Re=(e,t,i,a,l,d)=>{if(t){if(t.e||t.c!=i.c){let s,o,r,n,c=0,p=t.h,_=i.h,u=p.length,h=_.length,f=i.i,g=e.childNodes,x={},b=0;for(s=u;s--;)(n=(o=p[s]).d)&&(n=x[n]||(x[n]=[])).push(g[s]);for(s=0;s<h;s++){if(r=_[s],o=p[b],(n=x[r.d])&&(n=n.pop())){for(;n!=g[s];)e.appendChild(g[s]),p.push(p[b]),p.splice(b,1),o=p[b];f[o.d]&&f[o.d]--,Xe(n,e,o,r,a,l,d)}else o?x[o.d]&&f[o.d]?(u++,a.b=1,e.insertBefore(He(r,e,a),g[s]),b--):Xe(g[s],e,o,r,a,l,d):(e.appendChild(He(r,e,a)),a.b=1);b++}for(s=h;s<u;s++)1==(c=g[h]).nodeType&&l.unmountZone(c),e.removeChild(c)}}else a.b=1,e.innerHTML=i.c},Xe=(e,t,i,a,l,d,s)=>{let o=i.g,r=a.g,n=i.b;if(i.e||i.a!=a.a)if(n==a.b){if(n==Be)l.b=1,e.nodeValue=a.a;else if(n==c)l.b=1,t.innerHTML=a.a;else if(!o.mxs||o.mxs!=r.mxs){let t,c,p,_,u,h,f,g=r["mx-view"],x=a.c,b=i.f!=a.f,m=P(Ye,n)||b,y=se[e.b],v=g&&q(g);if(m&&Fe(e,i,a,l,b),g&&y&&y.g==v.path&&(_=y.a)){if(h=x!=i.c,f=g!=y.path,p=o.mxv,!h&&!f&&p)for(p of u=p.split(","))if("#"==p||P(s,p)){f=1;break}(f||h||m)&&((p=_.h&&_.m)?(u=v.params,oe(y.pId,g,u),y.path=g,E(p,u,_)&&l.a.push(_),t=!_.tmpl):(c=1,t=1))}else t=1,c=y;c&&(l.b=1,y.unmountVframe(0,1)),t&&!a.j&&Re(e,i,a,l,d,s)}}else i.b==c?t.innerHTML=a.a:(d.unmountZone(e),t.replaceChild(He(a,t,l),e)),l.b=1},Ue=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Ke=(e,t,i)=>(e.a?i=e:((i=function(e){E(i.a,e,this)}).a=[e],i.b=1),i.a=i.a.concat(t.a||t),i),We=(e,t)=>{let i,a,l=e.c;for(i in l)a=l[i],(t||a.a)&&Ge(l,i,1)},Ge=(e,i,a,l)=>{let d,s,o=e[i];return o&&o!=l&&((d=(s=o.b).destroy)&&a&&E(d,t,s),delete e[i]),s},qe=(e,t,i,a,l)=>{a=e[t],e[t]=e[i]=function(...e){(l=this).d>0&&(l.d++,l.fire("rendercall"),We(l),E(a,e,l))}},Je=(e,t)=>{let i,{n:a,i:l,o:d,id:s}=e;for(i in a)ve(i,l[i],t);for(i of(a=t?R:H,d))a(i.a,i.b,i.c,s,i.d,e)},Ze={win:i,doc:a},Qe=(e,t,i)=>{let a,l,d,s,o={};for(l of e)for(a in l)d=l[a],s=o[a],"ctor"!=a?(Ue.test(a)&&(s?d=Ke(s,d):d.b=1),o[a]=d):i.push(d);for(a in o)P(t,a)||(t[a]=o[a])};function $e(...e){let t=this.a||(this.a=[]);return Qe(e,this[p],t),this}let et=e=>{if(!e[c]){e[c]=[];let t,i,a,l,d,s,o,r,n,_,u,h=e[p],f={},g=[],x={};for(o in(i=h.mixins)&&Qe(i,h,e[c]),h)if(t=h[o],i=o.match(Ue)){if([,s,a,l,u]=i,_={},u)for(r of u=u.split(","))_[r]=!0;for(r of l=l.split(",")){if(d=Ze[a],n=1,s){if(d){g.push({c:t,a:d,b:r,d:_});continue}n=2,(d=x[r])||(d=x[r]=[]),d[a]||(d[a]=1,d.push(a))}f[r]=f[r]|n,(d=h[r=a+c+r])?d.b&&(t.b?h[r]=Ke(t,d):P(h,o)&&(h[r]=t)):h[r]=t}}qe(h,"render","g"),h.n=f,h.o=g,h.i=x,h.m=h.assign}return e[c]};function tt(e,t,i,a,l){(l=this).root=t,l.owner=i,l.id=e,l.c={},l.d=1,l.k=1,l.e={id:e},l.a={[c]:1},l.f=[],l.j={},(e=tt.a)&&E(e,a,l)}function it(){this.id=g("b"),this.a={}}w(tt,{merge:$e,extend:function e(t,i){let a=this,l=(t=t||{}).ctor,d=[];function s(e,t,i,l,o,r,n,c){a.call(n=this,e,t,i,l,o),(r=s.a)&&E(r,l,n),(c=d.concat(o)).length&&E(c,l,n)}return l&&d.push(l),s.merge=$e,s.extend=e,ee(s,a,t,i)}}),w(tt[p],ae,{init:s,render:s,beginUpdate(e,t){(t=this).d>0&&t.h&&t.owner.unmountZone(e)},endUpdate(e,t,i,a){(t=this).d>0&&(a=t.h,t.h=1,(i=t.owner).mountZone(e),a||l(t.wrapAsync(ne),0,i))},wrapAsync(e,t){let i=this,a=i.d;return(...l)=>{if(a>0&&a==i.d)return e.apply(t||i,l)}},capture(e,t,i,a){return a=this.c,t?(Ge(a,e,1,t),a[e]={b:t,a:i}):t=(a=a[e])&&a.b,t},release(e,t){return Ge(this.c,e,t)},get(e,t){return t=this.e,e&&(t=t[e]),t},set(e,t){let i=this;return i.k=((e,t,i,a)=>{let l,d,s,o=0;for(s in e)l=e[s],d=t[s],y(l)&&d===l||P(a,s)||(i[s]=1,o=1),t[s]=l;return o})(e,i.e,i.j,t)||i.k,i},digest(e,t,i){let a=this.set(e,t),l=a.f;i&&l.push(i),l.a||Oe(a,l)},snapshot(){return this.p=o(this.e),this},altered(){let e=this;if(e.p)return e.p!=o(e.e)},translate(e){return L(this.e,e)},parse(e){return Z(e,this.a)}}),w(it[p],{get(e,t){let i,a=this.a;if(e){let t,i=f(e)?e.slice():(e+"").split(".");for(;(t=i.shift())&&a;)a=a[t];t&&(a=void 0)}return void 0!==t&&(i=u(t))!=u(a)&&(a=t),a},set(e,t){h(e)||(e={[e]:t}),w(this.a,e)}});let at=(e,t,i)=>a=>{(i=e[t])&&(delete e[t],E(i,a,i.a))},lt=(e,t,i,a,l,d)=>{let s=[],o=null,r=0;return function(c,p){let _;r++;let u,h=this,f=h.b,g=f.a;if(s[c+1]=h,p?(o=p,_=1):d.has(g)||(g&&d.set(g,h),f.b=n(),(u=f.c)&&E(u,h,h),_=1),!i.a){let t=r==a;t&&(i.b=0,2==l&&(s[0]=o,E(e,s,i))),1==l&&E(e,[p||null,h,t,c],i)}_&&t.fire("end",{bag:h,error:p})}},dt=(e,t,i,a,l)=>{if(e.a)return e;if(e.b)return e.enqueue(dt.bind(e,e,t,i,a,l));e.b=1,f(t)||(t=[t]);let d=e.constructor,s=0,o=d.d,r=lt(i,d,e,t.length,a,d.c);for(let e of t)if(e){let t,[i,a]=d.get(e,l),n=i.b.a,c=r.bind(i,s++);n&&o[n]?o[n].push(c):a?(n&&((t=[c]).a=i,o[n]=t,c=at(o,n)),d.e(i,c)):c()}return e};function st(){let e=this;e.id=g("s"),e.f=[]}w(st[p],{all(e,t){return dt(this,e,t,2)},save(e,t){return dt(this,e,t,2,1)},one(e,t){return dt(this,e,t,1)},enqueue(e){let t=this;return t.a||(t.f.push(e),t.dequeue(t.g)),t},dequeue(...e){let t,i=this;i.b||i.a||(i.b=1,l(()=>{i.b=0,i.a||(t=i.f.shift())&&E(t,i.g=e)},0))},destroy(e){(e=this).a=1,e.f=0}});let ot=(e,t)=>[o(t),o(e)].join(c),rt=w({add(e){let t,i=this.h;for(t of(f(e)||(e=[e]),e))if(t){let{name:e,cache:a}=t;t.cache=0|a,i[e]=t}},create(e){let t=this.meta(e),i=0|e.cache||t.cache,a=new it;a.set(t),a.b={c:t.after,a:i&&ot(t,e)},h(e)&&a.set(e);let l=t.before;return l&&E(l,a,a),this.fire("begin",{bag:a}),a},meta(e){return this.h[e.name||e]||e},get(e,t){let i,a,l=this;return t||(i=l.cached(e)),i||(i=l.create(e),a=1),[i,a]},cached(e){let t,i,a=this,l=a.c,d=a.meta(e),s=0|e.cache||d.cache;if(s&&(i=ot(d,e)),i){let e=a.d[i];e?t=e.a:(t=l.get(i))&&n()-t.b.b>s&&(l.del(i),t=0)}return t}},ae);st.extend=((e,t,i)=>{function a(){st.call(this)}return a.e=e,a.c=new O(t,i),a.d={},a.h={},ee(a,st,null,rt)}),w(s[p],ae),s.extend=function e(t,i){let a=this,l=t&&t.ctor;function d(...e){a.apply(this,e),l&&l.apply(this,e)}return d.extend=e,ee(d,a,t,i)};let nt={config:(e,t)=>(t=m,e&&(t=h(e)?w(t,e):t[e]),t),boot(e){w(m,e),Q(m.exts,()=>{((e,t)=>(ie||(e=m.rootId,(t=x(e))||(t=r),ie=new pe(t)),ie))().mountView(m.defaultView)})},toMap:(e,t)=>{let i,a={};if(e)for(i of e)a[t&&i?i[t]:i]=t?i:1+(0|a[i]);return a},toTry:E,toUrl:(e,t,i)=>{let a,l,s,o=[];for(l in t)a=t[l]+"",(!i||a||P(i,l))&&(a=d(a),o.push(s=l+"="+a));return s&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+o.join("&")),e},parseUrl:q,mix:w,has:P,keys:k,inside:v,applyStyle:M,guid:g,Cache:O,use:Q,dispatch:(e,t,i)=>{let l=a.createEvent("Events");l.initEvent(t,!0,!0);for(let e in i)l[e]=i[e];e.dispatchEvent(l)},match:Y,type:u,View:tt,Vframe:pe,Service:st,State:de,guard:te,node:x};return nt.default=nt,nt});let Designer={init(e){let t=document.getElementById("boot").src.replace("/report.js","");seajs.config({paths:{designer:t+"/designer",elements:t+"/elements",gallery:t+"/gallery",i18n:t+"/i18n",panels:t+"/panels"}}),seajs.use(["magix","i18n/index"],(t,i)=>{t.applyStyle("d_",'body,figure,h5,input,p,textarea,ul{margin:0;padding:0}ul{list-style-type:none;list-style-image:none}a{background-color:transparent}a:active,a:hover{outline-width:0}a:focus{outline:1px dotted}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;font-size:62.5%}body{font-size:14px;line-height:1.5}body,button,input,textarea{font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif;-ms-text-autospace:ideograph-alpha ideograph-numeric ideograph-parenthesis;-ms-text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis}h5{font-size:14px}img{border-style:none;width:auto\\9;height:auto;max-width:100%;vertical-align:top;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}button,input,textarea{font-family:inherit;font-size:100%;margin:0;vertical-align:middle;*vertical-align:middle}button,input{*overflow:visible}button{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button;cursor:pointer}button[disabled],input[disabled]{cursor:not-allowed}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}button::-moz-focus-inner,input::-moz-focus-inner{border-style:none;padding:0}textarea{overflow:auto;resize:vertical}@media screen and (-webkit-min-device-pixel-ratio:0){input{line-height:normal!important}}input::-moz-placeholder,textarea::-moz-placeholder{color:#a9a9a9;opacity:1}label{cursor:pointer}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}a:focus,button:focus,input:focus,textarea:focus{outline:none;resize:none}a{color:#fa742b;text-decoration:none}a:focus,a:hover{color:#bd361b}a:active,a:focus,a:hover,a:visited{outline:0;text-decoration:none}label{cursor:default;display:inline-block;max-width:100%;font-weight:400}::-ms-clear{display:none}@font-face{font-family:da;src:url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAcsAAsAAAAACqQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZXOEjOY21hcAAAAYAAAACWAAACCs4hbhBnbHlmAAACGAAAAugAAAO0BG1azWhlYWQAAAUAAAAALwAAADYPpP4TaGhlYQAABTAAAAAcAAAAJAfeA4pobXR4AAAFTAAAABQAAAAkI+kAAGxvY2EAAAVgAAAAFAAAABQEcAVsbWF4cAAABXQAAAAfAAAAIAEYAF1uYW1lAAAFlAAAAUUAAAJtPlT+fXBvc3QAAAbcAAAATwAAAGizaRo4eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/ss4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDy7z9zwv4EhhrmB4RRQmBEkBwA4Ig2aeJzFkbsNwzAMRE+RP0IQwEEG8AReyl1Kl+68g5Eqy7m7NZyj6EZI6viEJ4AnkRJIADWAKAZRAeGNANNLbsh+xDX7FZ6KH7jLuWBmYseeIxeu3PZdZ7+8UkH55TIvIql6raoNWhnNV97fFM57utQt79MRJTEf6ItMjk2OnWN32Ds2SY6OTZiLow6Dq6Neg5uD9gPbdC1VAAB4nH1SO2sUURi9370zd3Zmd+48dh77yr4mO7MmutlsxkkR3DQ2GgtBCAhaCBY2SrAwjUUw5CEo+A/EoAgR1LBpArEUQVBs3MrCYEAbY+xsMnpHV0ghDsM9936cj+9xDhIR+rlDtkkOZVETjaOT6CxCQEehzvAQ1IKwhUfBrom2azESeEFN8uotcgLcOrWcThT6LpWoBgzKMFHrREELB3A87OIp6DhDAPli4ZzZKJnkHii5oLwUn8ZrYFe8ktY9Fp86Om11qtnUfMY086Z5J0VFMYWxoDG46jqyKCs0fihqBXu7cgRXIJMPCmfOq9WieWk1vDbUcGWAhQXIFqvs8bRRMPh/s+Bkzbykq6lcQfWGLZjfTeeymSH/E+If5rNG5AfxURpNJVMiyUFuhCZ9RFzH0oDWx8CvDzCchigcYKcCTmeACc/CqB/vUgqlfh9KlMa7ZxYZa2gNbZH5bJFjg7FFVf1XkPic3j+UfrD3/4RDwT8z3CIH5AbKowZCYuAHXTjegoCBVAa3E006Sa9R2OCxLkzyGAPy9aMkj7bFvc3NPZGfM0uRIH00RqoHmys9Qnorv09vRxKipZneN0H41uPE9qgs7WjVkZecsNwThN7ySg8Br79AhskC9wuSsWPRegCuH062x/l6HIvY8Syss3JTizWPMXirNctkJJ6NZ/mFwXdPa+rwRis3uR6QiEIu4s9cDwQ1wzNqds2YMGrkQry/Gu+Dvgo69EEfvNDfHPwS9pL6v8UKfG7FSuK/KFEMvxBNae0+NTPicyKTtLghwhdRXFsTlaz0jAhAN4j5t/YsbCGCUJbXfYLXD/jz+sAn78lrMoJaaIxTJcpXym3uJbbg6rcwLzQGLegCv0xz6CRL5z1gKpGtR7oQYJpWtUz6nW2/UosOg7agP1Uk2WKfnPQV6pZcejntfGaWLCnw4K7h7Kp2SqZzijInYd1Wv7j6baVQNHBTsD5kNC3zwRKa2CgWFN7eL0lutBh4nGNgZGBgAGLnEJdv8fw2Xxm4WRhA4JrTXQME/d+MhYG5AcjlYGACiQIAFvYJkgB4nGNgZGBgbvjfwBDDwgACQJKRARVwAgBHDwJyeJxjYWBgYH7JwMDCgBsDAB8LAQ0AAAAAAHYA2AEYAT4BWAF8AYoB2nicY2BkYGDgZAhkYGUAASYg5gJCBob/YD4DABGZAXYAeJxlj01OwzAQhV/6B6QSqqhgh+QFYgEo/RGrblhUavdddN+mTpsqiSPHrdQDcB6OwAk4AtyAO/BIJ5s2lsffvHljTwDc4Acejt8t95E9XDI7cg0XuBeuU38QbpBfhJto41W4Rf1N2MczpsJtdGF5g9e4YvaEd2EPHXwI13CNT+E69S/hBvlbuIk7/Aq30PHqwj7mXle4jUcv9sdWL5xeqeVBxaHJIpM5v4KZXu+Sha3S6pxrW8QmU4OgX0lTnWlb3VPs10PnIhVZk6oJqzpJjMqt2erQBRvn8lGvF4kehCblWGP+tsYCjnEFhSUOjDFCGGSIyujoO1Vm9K+xQ8Jee1Y9zed0WxTU/3OFAQL0z1xTurLSeTpPgT1fG1J1dCtuy56UNJFezUkSskJe1rZUQuoBNmVXjhF6XNGJPyhnSP8ACVpuyAAAAHicbccxDoAgDAXQfkQEbsOR6gLVpAykCeH0xrj6tkeOPpn+JThs8NgRcCAiIRNmqMZ6ShjdhvU4hbUu6/4SLnE11pulvFM/RSvRA98yEWMA") format("woff")}.d_{font-family:da;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.da{margin-right:10px}.db{height:100%}.dc{text-align:center}.dd{float:left}.de{float:right}html .df{display:inline-block}.dg{position:absolute}.dh{position:relative}html .di{display:none}.dj:after,.dj:before{content:" ";display:table}.dj:after{clear:both}.dk{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dl::-webkit-scrollbar,.dl::-webkit-scrollbar-corner{height:8px;width:8px;background:#fafafa}.dl::-webkit-scrollbar-thumb{background:silver}.dl::-webkit-scrollbar-thumb:hover{background:#949494}.dm{word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.dm,.dn{white-space:nowrap}.dn{outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;padding:4px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dn:focus,.dn:hover{background-color:#a0a0a0;color:#333}.do{background-color:#fa742b;color:#fff}.do:focus,.do:hover{background-color:#bd361b;color:#fff}.dn[disabled]{background-color:#fbfbfb}.dn[disabled]:hover{border-color:#e6e6e6}.dp{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.42857143;background:#fff}.dq{padding:18px 25px}.dr{padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6;background:#fff}.ds{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.ds:after,.ds:before{content:""}.ds:after,.ds:before,.dt{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:d_ 1s ease-in-out infinite both;animation:d_ 1s ease-in-out infinite both}.ds:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.dt{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes d_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes d_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}::-webkit-input-placeholder{color:#999}::-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:rgba(243,123,99,.6)}::selection{background-color:rgba(243,123,99,.6)}.du,.dv{caret-color:#fa742b;display:inline-block;height:22px;padding:3px 4px;border-radius:2px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;vertical-align:middle;max-width:100%;outline:none;transition:border-color .25s}.du:hover,.dv:hover{border-color:#ccc}.du:focus,.dv:focus,.dw,.dw:hover{border-color:#fa742b!important}.dv{height:auto}.du[disabled],.dv[disabled]{background-color:#fbfbfb}.du[disabled]:hover,.dv[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}@font-face{font-family:db;src:url(//at.alicdn.com/t/font_890516_hbs4agp4pw.eot);src:url(//at.alicdn.com/t/font_890516_hbs4agp4pw.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_890516_hbs4agp4pw.woff) format("woff"),url(//at.alicdn.com/t/font_890516_hbs4agp4pw.ttf) format("truetype"),url(//at.alicdn.com/t/font_890516_hbs4agp4pw.svg#iconfont) format("svg")}.dx{font-family:db;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#app,body,html{height:100%;overflow:hidden}body{min-width:900px}.dy{font-size:12px}.dz{margin-right:2px}.dA{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.dB{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.dC{margin-left:100px}.dD{margin-right:50px}.dE{display:flex;align-items:center}.dF{top:0}.dF,.dG{position:-webkit-sticky;position:sticky}.dG{bottom:0}');let a="zh-cn";try{let e=window.localStorage;e&&(a=e.getItem("l.report.lang")||a)}catch(e){}t.config(e),t.config({lang:a});let l=i.default;t.View.merge({ctor(){this.set({i18n:l})},__cJ(e,t){t=t||150;let i,a=Date.now();return(...l)=>{let d=Date.now();clearTimeout(i),d-a>t?(a=d,e.apply(this,l)):i=setTimeout(()=>{e.apply(this,l)},t-(d-a))}}}),document.title=l("_b"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",error(e){setTimeout(()=>{throw e},0)}})})}};define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../mx-dragdrop/index"),l=e("../mx-monitor/index");i.default.applyStyle("dh",'.daB{position:relative;height:22px;border:1px solid #e6e6e6;border-radius:2px;display:flex;align-items:center;cursor:pointer;padding:1px;transition:border-color .25s}.daB:hover{border-color:#ccc}.daC,.daD{background:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0);background-position:0 0,6px 6px;background-size:12px 12px}.daD{min-width:18px;height:18px;text-indent:-100000em;border:1px solid #ccc;position:relative}.daE{padding:3px 4px}.daD:after{content:" ";display:block;right:0;bottom:0;position:absolute;border-color:transparent #ccc;border-style:solid;border-width:6px 6px 0 0}.daF{position:absolute;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:2px}.daG-bottom{top:100%;margin-top:4px}.daG-top{bottom:100%;margin-bottom:4px}.daH{width:176px}.daI{border:1px solid #000;float:left;width:12px;height:12px;margin:-1px 0 0 -1px;position:relative}.daJ:before{content:" ";position:absolute;left:2px;top:2px;border:1px inset #e8e8e8;width:6px;height:6px}.daK{margin:5px 0;height:150px}.daL{position:relative;float:left;width:148px;height:148px}.daM{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;left:-4px;top:-4px}.daN{width:18px;height:148px;position:relative;float:left;margin-left:10px}.daO{position:absolute;left:2px;top:-2px;height:4px;width:14px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.daP{height:25px}.daQ{width:80px}.daR,.daQ{margin-right:5px;vertical-align:middle}.daR{width:30px;border-radius:2px;height:22px;display:inline-block;border:1px solid #ddd}.daS{position:absolute;right:5px;top:4px;font-size:12px;opacity:.2}.daS:hover{opacity:.5}.daC{width:174px;height:12px;margin-bottom:5px}.daT{height:100%}.daU{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.daV{cursor:not-allowed;background-color:#fbfbfb}.daV:hover{border-color:#e6e6e6}.daV:hover .daS{opacity:.1}.daV .daD{opacity:.4}.daV .daS{opacity:.1}');let d=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],s=(e,t,i)=>{let a,l,d,s,o;e=e%360/60,a=l=d=i-(o=i*t);let r=255*(a+=[o,s=o*(1-Math.abs(e%2-1)),0,0,s,o][e=~~e]),n=255*(l+=[s,o,o,s,0,0][e]),c=255*(d+=[0,0,s,o,o,s][e]);return{r:r,g:n,b:c,hex:"#"+(16777216|c|n<<8|r<<16).toString(16).slice(1)}};t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s,o)=>{let r,n,c,p,_,u,h,f,g,x,b,m=[],y=e.disabled,v=e.id,w=e.text,k=e.textWidth,A=e.color,S=e.clear,z=e.i18n,T=e.placement,j=e.align,M=e.renderUI,E=e.shortcuts,P=e.alpha,L=e.current;if(c=[],w&&(u=[t(0,w)],_="",k&&(_+="width:"+k+"px"),(n={class:"daE dk"}).style=_,n["mx-click"]=i+"\x1e__bc()",p=[t("div",u,n)],c.push(...p)),p=[t(0,"picker")],_="",A&&(_+="background:"+A+";"),w||(_+="width:100%"),(n={class:"daD dk","mx-click":i+"\x1e__bc()"}).style=_,c.push(t("div",p,n)),S&&A&&(u=[t(0,"\ue67f")],p=[t("i",u,{class:"d_ daS","mx-click":i+"\x1e__bd()",title:z("_G")})],c.push(...p)),p=[],M){u=[],h=[];for(let e=0,a=E,l=a.length;e<l;e++){let l=a[e];f=[t("li",0,{class:"daI",id:"sc_"+l+"_"+v,style:"background:#"+l,"mx-click":i+"\x1e__b_({color:'#"+o(l)+"'})"})],h.push(...f)}u.push(t("ul",h,{class:"daH dj",id:"scs_"+v})),(b=[t("stop",0,{mxs:"dk:_",offset:"0%","stop-color":"#000000","stop-opacity":"1"})]).push(t("stop",0,{mxs:"dk:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),x=[t("lineargradient",b,{id:"gb_"+v,x1:"0%",y1:"100%",x2:"0%",y2:"0%"})],(b=[t("stop",0,{mxs:"dk:b",offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"})]).push(t("stop",0,{mxs:"dk:a",offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})),x.push(t("lineargradient",b,{id:"gw_"+v,x1:"0%",y1:"100%",x2:"100%",y2:"100%"})),(g=[t("defs",x)]).push(t("rect",0,{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gw_"+v+")"}),t("rect",0,{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gb_"+v+")"})),(f=[t("svg",g,{mxa:"dk:d",xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"})]).push(t("div",0,{class:"daM",id:"ci_"+v})),h=[t("div",f,{class:"daL",id:"cz_"+v,"mx-mousedown":i+"\x1e__aW()"})],(b=[t("stop",0,{mxs:"dk:c",offset:"0%","stop-color":"#FF0000","stop-opacity":"1"})]).push(t("stop",0,{mxs:"dk:d",offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),t("stop",0,{mxs:"dk:e",offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),t("stop",0,{mxs:"dk:f",offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),t("stop",0,{mxs:"dk:g",offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),t("stop",0,{mxs:"dk:h",offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),t("stop",0,{mxs:"dk:i",offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),t("stop",0,{mxs:"dk:j",offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),t("stop",0,{mxs:"dk:k",offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})),x=[t("lineargradient",b,{id:"ghsv_"+v,x1:"0%",y1:"100%",x2:"0%",y2:"0%"})],(g=[t("defs",x)]).push(t("rect",0,{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#ghsv_"+v+")"})),(f=[t("svg",g,{mxa:"dk:f",xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"})]).push(t("div",0,{class:"daO",id:"si_"+v})),h.push(t("div",f,{mxa:"dk:e",class:"daN","mx-mousedown":i+"\x1e__aX()"})),u.push(t("div",h,{mxa:"dk:c",class:"daK"})),P&&(g=[t("div",0,{class:"daU",id:"ai_"+v})],f=[t("div",g,{class:"daT dh",id:"at_"+v,"mx-mousedown":i+"\x1e__aY()"})],h=[t("div",f,{mxa:"dk:h",class:"daC dh"})],u.push(...h)),(h=[t("span",0,{class:"daR",id:"bc_"+v})]).push(t("input",0,{class:"du daQ",readonly:!0,id:"v_"+v,value:L},1)),f=[t(0,"\u786e\u5b9a")],h.push(t("button",f,{mxs:"dk:l",class:"dn do",type:"button","mx-click":i+"\x1e__aZ();"})),u.push(t("div",h,{mxa:"dk:i",class:"daP"})),p.push(...u)}return c.push(t("div",p,{id:"bd_"+v,class:"daF daG-"+T,style:j+":-1px"})),r="daB",y&&(r+=" daV"),(n={}).class=r,n["mx-contextmenu"]=i+"\x1e__A()",n.id="root_"+v,m.push(t("div",c,n)),t(i,m)},mixins:[a.default],init(e){this.set({shortcuts:d}),l.default.__aM(),this.on("destroy",()=>{l.default.__aB(this),l.default.__aN()}),this.assign(e)},assign(e){return this.__aa=e.color,this.__aO=e.alpha+""=="true",this.__aP={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"}),!0},render(){this.digest({alpha:this.__aO,color:this.__aa,current:this.__aa})},__aS(e,t){let a=this,l=a.__aP;l.h=e.h,l.s=e.s,l.v=e.v;let d=s(e.h,e.s,e.v).hex,o=i.default.node("cz_"+a.id),r=o.clientWidth,n=s(e.h,1,1);if(o.style.background=n.hex,a.__aQ=d,a.__aR(),!t){let e=i.node("scs_"+a.id).querySelector('li[class$="daJ"]');e&&e.classList.remove("daJ");let t=i.node("si_"+a.id),d=t.clientHeight/2,s=Math.round(l.h*r/360-d),o=i.node("ci_"+a.id),n=o.clientWidth/2;t.style.top=s+"px",s=Math.round((1-l.v)*r-n);let c=Math.round(l.s*r-n);o.style.left=c+"px",o.style.top=s+"px"}let c=i.node("sc_"+d.substr(1,6)+"_"+a.id);c&&c.classList.add("daJ")},__aV(e){let t=this,i=parseInt(e.substr(1,2),16);isNaN(i)&&(i=255);let a=parseInt(e.substr(3,2),16);isNaN(a)&&(a=255);let l=parseInt(e.substr(5,2),16);isNaN(l)&&(l=255);let d=((e,t,i)=>{let a,l,d,s;return e/=255,t/=255,i/=255,{h:a=(a=0==(s=(d=Math.max(e,t,i))-Math.min(e,t,i))?null:d==e?(t-i)/s+(t<i?6:0):d==t?(i-e)/s+2:(e-t)/s+4)%6*60,s:l=0===s?0:s/d,v:d}})(i,a,l),s=parseInt(e.substr(7,2),16);isNaN(s)&&(s=255),t.__aT=("0"+s.toString(16)).slice(-2),t.__aS(d),t.__aO&&t.__aU(s)},__aU(e){let t=i.node("ai_"+this.id);e/=255,e*=i.node("at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},__aR(){let e=this,t=i.node("bc_"+e.id),a=e.__aQ;e.__aO&&(i.node("at_"+e.id).style.background="linear-gradient(to right, "+a+"00 0%,"+a+" 100%)",a+=e.__aT),t.style.background=a,i.node("v_"+e.id).value=a},"__A<contextmenu>"(e){e.preventDefault()},"__aW<mousedown>"(e){let t=this,a=i.node("cz_"+t.id).clientWidth,l=i.node("ci_"+t.id).clientWidth/2,d=e.eventTarget.getBoundingClientRect(),s=e.pageX-d.left-window.pageXOffset,o=e.pageY-d.top-window.pageYOffset,r=s/a,n=(a-o)/a;t.__aS({h:t.__aP.h,s:r,v:n});let c=i.node("ci_"+t.id),p=getComputedStyle(c),_=p.left,u=p.top,h=parseInt(_,10),f=parseInt(u,10),g=e;t.__w(e,e=>{let i=e.pageY-g.pageY,d=e.pageX-g.pageX;(i+=f)<=-l?i=-l:i>=a-l&&(i=a-l),(d+=h)<=-l?d=-l:d>=a-l&&(d=a-l),c.style.left=d+"px",c.style.top=i+"px";let s=(d+l)/a,o=(a-(i+l))/a;t.__aS({h:t.__aP.h,s:s,v:o})})},"__aX<mousedown>"(e){let t=this,a=e.eventTarget,l=i.node("si_"+t.id),d=i.node("cz_"+t.id).clientWidth,s=l.clientHeight/2,o=a.getBoundingClientRect(),r=(e.pageY-o.top-window.scrollY)/d*360;t.__aS({h:r,s:t.__aP.s,v:t.__aP.v});let n=parseInt(getComputedStyle(l).top,10);t.__w(e,i=>{let a=i.pageY-e.pageY;(a+=n)<=-s?a=-s:a>=d-s&&(a=d-s),l.style.top=a+"px";let o=(a+s)/d*360;t.__aS({h:o,s:t.__aP.s,v:t.__aP.v},!0)})},"__aY<mousedown>"(e){let t=e.eventTarget,a=this,l=i.node("ai_"+a.id),d=i.node("at_"+a.id).clientWidth,s=l.clientWidth/2,o=t.getBoundingClientRect(),r=(e.pageX-o.left)/d*255|0;a.__aT=("0"+r.toString(16)).slice(-2),a.__aU(r),a.__aR();let n=getComputedStyle(l),c=parseInt(n.left,10);a.__w(e,t=>{let i=t.pageX-e.pageX;(i+=c)<=-s?i=-s:i>=d-s&&(i=d-s),l.style.left=i+"px";let o=Math.round((i+s)/d*255);a.__aT=("0"+o.toString(16)).slice(-2),a.__aR()})},"__aZ<click>"(){let e=this;e.__y();let t=i.node("v_"+e.id).value;t!=e.__aa&&(e.digest({color:t,current:t}),i.default.dispatch(e.root,"input",{color:e.__aa=t}))},"__b_<click>"(e){this.__aV(e.params.color),e.eventTarget.classList.add("daJ")},__ba(e){return i.default.inside(e,this.root)},__x(){let e=i.node("bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",l.default.__aA(this),i.node("root_"+this.id).classList.add("dw"),this.__bb||(this.digest({renderUI:!0},null,()=>{this.__aV(this.__aa)}),this.__bb=1))},__y(){let e=i.node("bd_"+this.id);"none"!=getComputedStyle(e).display&&(i.node("root_"+this.id).classList.remove("dw"),e.style.display="none",l.default.__aB(this))},"__bc<click>"(){if(this.get("disabled"))return;let e=i.node("bd_"+this.id);"none"==getComputedStyle(e).display?this.__x():this.__y()},"__bd<click>"(){if(this.get("disabled"))return;let e=this;if(e.__bb){let t=i.node("v_"+e.id).value;e.__y(),e.digest({color:"",current:t})}i.default.dispatch(e.root,"input",{color:e.__aa=""})}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../../i18n/index");t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d=[],s=e.title,o=e.body,r=e.i18n;return l=[t(0,s)],a=[t("h5",l)],d.push(t("div",a,{mxa:"dl:_",class:"dp"})),a=[t(0,o)],d.push(t("div",a,{mxa:"dl:a",class:"dq",style:"word-break:break-all;"})),l=[t(0,r("_I"))],a=[t("button",l,{mxa:"dl:c","mx-click":i+"\x1e__aZ();",class:"dn do de",type:"button"})],d.push(t("div",a,{mxa:"dl:b",class:"dr dj"})),t(i,d)},init(e){this.__be=e.dialog,this.__bf=e.body,this.__bg=e.title||a.default("__H"),this.__bh=e.enterCallback},render(){this.digest({body:this.__bf,title:this.__bg})},"__aZ<click>"(){let e=this;e.__be.close(),e.__bh&&i.default.toTry(e.__bh)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../../i18n/index");t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d=[],s=e.title,o=e.body,r=e.i18n;return l=[t(0,s)],a=[t("h5",l)],d.push(t("div",a,{mxa:"dm:_",class:"dp"})),a=[t(0,o)],d.push(t("div",a,{mxa:"dm:a",class:"dq",style:"word-break:break-all;"})),l=[t(0,r("_J"))],a=[t("button",l,{mxa:"dm:c",type:"button","mx-click":i+"\x1e__bj()",class:"dn de"})],l=[t(0,r("_I"))],a.push(t("button",l,{mxa:"dm:d",type:"button","mx-click":i+"\x1e__aZ()",class:"dn do da de"})),d.push(t("div",a,{mxa:"dm:b",class:"dr dj"})),t(i,d)},init(e){let t=this;t.__be=e.dialog,t.__bf=e.body,t.__bg=e.title||a.default("__H"),t.__bh=e.enterCallback,t.__bi=e.cancelCallback},render(){this.digest({body:this.__bf,title:this.__bg})},"__aZ<click>"(){let e=this;e.__be.close(),e.__bh&&i.default.toTry(e.__bh)},"__bj<click>"(){let e=this;e.__be.close(),e.__bi&&i.default.toTry(e.__bi)}})}),define("gallery/mx-dialog/index",["magix","./alert","./confirm"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");e("./alert"),e("./confirm"),i.default.applyStyle("di",".daW{position:absolute}.daX{position:relative;background-color:#fff;border-radius:2px;border:1px solid #e6e6e6}.daY{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.daY:focus,.daY:hover{opacity:.5}.daZ{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2}.db_{-webkit-filter:blur(3px);filter:blur(3px)}.dba{-webkit-animation:dc .3s;animation:dc .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.dbb{position:absolute;right:10px;top:0;width:1px;height:0}.dbc{padding:80px 0}@-webkit-keyframes dc{0%{opacity:0}to{opacity:.2}}@keyframes dc{0%{opacity:0}to{opacity:.2}}.dbd{-webkit-animation:dd .2s;animation:dd .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes dd{0%{opacity:.2}to{opacity:0}}@keyframes dd{0%{opacity:.2}to{opacity:0}}.dbe{margin-bottom:50px;min-height:60px}.dbf{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.dbg{-webkit-animation:de .3s;animation:de .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes de{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes de{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.dbh{-webkit-animation:df .2s;animation:df .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes df{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes df{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");let a=500,l=[];t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d,s,o,r,n=[],c=e.removeClass,p=e.zIndex,_=e.id,u=e.left,h=e.top,f=e.width,g=e.closable;return a="daZ",c||(a+=" dba"),(l={}).class=a,l.style="z-index:"+(p-1),l.id="mask_"+_,n.push(t("div",0,l)),s=[t("input",0,{id:"focus_"+_,class:"dbb"},1)],o=[t(0,"\ue67f")],s.push(t("span",o,{class:"d_ daY "+(g?"":"di"),"mx-click":i+"\x1e__bm()"})),r=[t("span",0,{class:"dt"})],o=[t("div",r,{mxs:"dn:_",class:"ds dbc"})],s.push(t("div",o,{class:"daX dbe",id:"cnt_"+_})),a="daW",c||(a+=" dbg"),(l={}).class=a,l.id="body_"+_,l.style="left:"+u+"px;top:"+h+"px;width:"+f+"px;",d=[t("div",s,l)],n.push(t("div",d,{class:"dbf",style:"z-index:"+p+";"})),t(i,n)},init(e){let t=this,d=i.default.node("app"),s=t.root;t.on("destroy",()=>{(e=>{for(let t,i=l.length-1;i>=0;i--)if((t=l[i]).id==e.id){l.splice(i,1);break}})(t),500==(a-=2)&&d.classList.remove("db_"),i.default.dispatch(s,"close"),s.parentNode.removeChild(s)}),i.default.has(e,"closable")||(e.closable=!0),t.set(e),500==a&&d.classList.add("db_"),a+=2,l.push(t)},render(){let e=this;e.digest({zIndex:a},null,()=>{let t=e.get();setTimeout(e.wrapAsync(()=>{e.root.style.display="block",i.default.node("focus_"+e.id).focus()}),30),e.owner.mountVframe(i.default.node("cnt_"+e.id),t.view,t),setTimeout(e.wrapAsync(()=>{e.digest({removeClass:!0})}),300)})},__bk(e){let t=i.default.node("cnt_"+this.id);i.default.Vframe.get(t).invoke("fire",["unload",e])},__bl(){let e,t=this.id;(e=i.default.node("body_"+t)).classList.add("dbh"),(e=i.default.node("mask_"+t)).classList.add("dbd")},"__bm<click>"(){i.default.dispatch(this.root,"dlg_close")},"$doc<keyup>"(e){if(27==e.keyCode){let e=l[l.length-1];e==this&&e.get("closable")&&i.default.dispatch(this.root,"dlg_close")}}},{__bo(e,t){let a=i.default.guid("dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+a+'" style="display:none" />');let l,d=i.default.node(a),s=e.owner.mountVframe(d,"gallery/mx-dialog/index",t);return d.addEventListener("dlg_close",()=>{if(!d.__bn&&!l){let e=()=>{d.__bn=1,s.invoke("__bl"),setTimeout(()=>{s.unmountVframe()},200)},t={p:0,prevent(){l=1},resolve(){t.p=1,l=0,e()},reject(){t.p=1,l=0}};s.invoke("__bk",[t]),l||t.p||e()}}),d},alert(e,t,i){this.confirm(e,t,null,i,"alert")},confirm(e,t,i,a,l){this.mxDialog("gallery/mx-dialog/"+(l||"confirm"),{body:e,cancelCallback:i,enterCallback:t,title:a,modal:!0,width:300,closable:!1,left:(window.innerWidth-300)/2,top:Math.max((window.innerHeight-220)/2,0)})},mxDialog(e,t){let a,l,d=this,s={view:e};return i.default.use(e,d.wrapAsync(o=>{let r="$dlg_"+e;d[r]||(d[r]=1,i.default.mix(s,o.dialogOptions),i.default.mix(s,t),s.width||(s.width=500),s.left||(s.left=(window.innerWidth-s.width)/2),s.top||(s.top=100),s.dialog={close(){a&&i.default.dispatch(a,"dlg_close")}},(a=d.__bo(d,s)).addEventListener("close",()=>{delete d[r],l&&l()}))})),{close(){a&&i.default.dispatch(a,"dlg_close")},whenClose(e){l=e}}}})}),define("gallery/mx-dragdrop/index",[],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=window.getComputedStyle,a=e=>{(e=window.getSelection)&&e().removeAllRanges()},l=e=>{e.preventDefault()},d=["mousemove","touchmove","pointermove"],s=["mouseup","touchend","pointercancel","touchcancel"],o=["keydown","mousewheel","DOMMouseScroll","fullscreenchange"];t.default={ctor(){let e=this;e.on("destroy",()=>{e.__bp()})},__bp(e){let t=this,i=t.__bq;if(i){let a;for(a of(delete t.__bq,d))document.removeEventListener(a,t.__br);for(a of s)document.removeEventListener(a,t.__bs);for(a of o)document.removeEventListener(a,l);window.removeEventListener("blur",t.__bs);let r=i.__bt;i.__bu&&r(e)}},__w(e,t,i){let r=this;if(r.__bp(),e){a(),r.__bq={__bt:i,__bu:!!i};let e,n=!!t;for(e of(r.__bv=0,r.__bs=(e=>{r.__bv=1,r.__bp(e)}),r.__br=(e=>{n&&t(e)}),d))document.addEventListener(e,r.__br);for(e of s)document.addEventListener(e,r.__bs);for(e of o)document.addEventListener(e,l,{passive:!1});window.addEventListener("blur",r.__bs)}},__aI(e,t){let a=null;if(document.elementFromPoint)for(!l.__bw&&i&&(l.__bw=!0,l.__bx=null!==document.elementFromPoint(-1,-1)),l.__bx&&(e+=window.pageXOffset,t+=window.pageYOffset),a=document.elementFromPoint(e,t);a&&3==a.nodeType;)a=a.parentNode;return a},__by:a}}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../mx-monitor/index");i.default.applyStyle("dj",'.dbi{outline:0;position:relative;min-width:50px;width:100%;background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;display:inline-block;vertical-align:middle;height:22px;transition:all .25s}.dbi:hover{border-color:#ccc}.dbj{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 20px 0 3px}.dbk{cursor:not-allowed;background-color:#fbfbfb}.dbk:hover{border-color:#e6e6e6}.dbk .dbj{cursor:not-allowed}.dbl{position:absolute;right:0;top:0;font-size:20px;color:#ccc;transition:all .25s}.dbm .dbl{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}.dbi[tabindex="0"]:focus,.dbm,.dbm:hover{border-color:#fa742b}.dbn{height:20px;line-height:21px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.dbo{color:#999}.dbp{position:absolute;top:100%;left:-1px;right:-1px;margin-top:4px;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dbm .dbp{display:block}.dbq{overflow:auto;max-height:196px;padding:2px 0}.dbr{padding:0 2px;margin:2px 0}.dbs{cursor:pointer;color:#666;display:block;width:100%;padding:0 5px;height:20px;line-height:20px;border-radius:2px}.dbs:hover{color:#333;background-color:#f0f0f0}.dbt,.dbt:active,.dbt:focus,.dbt:hover{color:#fff;background-color:#fa742b}'),t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s)=>{let o,r,n,c,p,_,u,h,f,g,x,b=[],m=e.disabled,y=e.id,v=e.selectedText,w=e.selected,k=e.emptyText,A=e.rList,S=e.list,z=e.textKey,T=e.valueKey;if(c=[],_=[t(0,v)],r="dbn",""!==w&&w!=k||(r+=" dbo"),(n={}).class=r,p=[t("span",_,n)],_=[t(0,"\ue692")],p.push(t("span",_,{mxs:"do:_",class:"d_ dbl"})),c.push(t("div",p,{class:"dbj","mx-click":i+"\x1e__bc()",title:v})),A){h=[];for(let e=0,l=S,d=l.length;e<d;e++){let d=l[e];f=[];var j=d,M=d;z&&T&&(u="",j=d[z],u+=" ",M=d[T]);var E=M+""==w+"";x=[t(0,j)],r="dbs dm",E&&(r+=" dbt"),(n={}).class=r,n["mx-click"]=i+"\x1e__bz({item:'"+s(a,d)+"'})",g=[t("span",x,n)],f.push(t("li",g,{title:j,active:(o=E)?o:null,class:"dbr"})),h.push(...f)}_=[t("ul",h,{class:"dbq",id:"list_"+y})],p=[t("div",_,{mxa:"do:a",class:"dbp"})],c.push(...p)}return r="dbi",m&&(r+=" dbk"),(n={}).class=r,n.id="dd_"+y,b.push(t("div",c,n)),t(i,b)},init(e){a.default.__aM(),this.on("destroy",()=>{a.default.__aB(this),a.default.__aN()}),this.assign(e)},assign(e){let t=e.selected,a=e.textKey||"",l=e.valueKey||"",d=e.emptyText||"",s=e.disabled+""=="true",o=e.list||[];o=o.slice();let r=i.default.toMap(o,l);if(d)if(a&&l){if(!r[""]){let e={};e[a]=d,e[l]="",o.unshift(e),r[""]=e}}else r[d]||(o.unshift(d),r[d]=d);t||!d||a||l||(t=d),t&&r[t]||(t=r[t]||o[0],a&&l&&(t=t[l]));let n=a&&l?r[t][a]:t;return this.set({selected:t,selectedText:n,list:o,textKey:a,valueKey:l,emptyText:d,disabled:s}),!0},render(){this.digest()},__ba(e){return i.default.inside(e,this.root)},__x(){let e=this,t=i.default.node("dd_"+e.id);if(!t.classList.contains("dbm")){t.classList.add("dbm");let l=()=>{let a=(t=i.default.node("list_"+e.id)).querySelector("li[active]");a&&a.scrollIntoViewIfNeeded&&a.scrollIntoViewIfNeeded()};e.get("rList")?l():e.digest({rList:!0},null,l),a.default.__aA(e)}},__y(){let e=this,t=i.default.node("dd_"+e.id);t.classList.contains("dbm")&&(t.classList.remove("dbm"),a.default.__aB(e))},"__bc<click>"(){let e=this,t=i.default.node("dd_"+e.id);t.classList.contains("dbm")?e.__y():t.classList.contains("dbk")||e.__x()},"__bz<click>"(e){let t=this;t.__y();let a=t.get("valueKey"),l=t.get("textKey"),d=t.get("selected"),s=e.params.item,o=s,r=s;l&&a&&(r=s[l],o=s[a]),d!==o&&(t.digest({selected:o,selectedText:r}),i.default.dispatch(t.root,"change",{item:s,value:a?s[a]:s,text:l?s[l]:s}))}})}),define("gallery/mx-font/align",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("dk",".dbu{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.dbv{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.dbv:hover{background:#ccc}.dbw,.dbw:hover{background:#fa742b;color:#fff}.dbx,.dbx .dbv{cursor:not-allowed;opacity:.7}.dbx .dbv,.dbx .dbv:hover{background:#e9e9e9}.dbx .dbw,.dbx .dbw:hover{background:#fb955d}"),t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d,s,o=[],r=e.disabled,n=e.i18n,c=e.value;return s=[t(0,"\ue687")],l={title:n("_K")},a="dd dbv dx","flex-start"==c.h&&(a+=" dbw"),l.class=a,l["mx-click"]=i+"\x1e__ap({type:'h',v:'flex-start'})",d=[t("li",s,l)],s=[t(0,"\ue68a")],l={title:n("_L")},a="dd dbv dx","center"==c.h&&(a+=" dbw"),l.class=a,l["mx-click"]=i+"\x1e__ap({type:'h',v:'center'})",d.push(t("li",s,l)),s=[t(0,"\ue686")],l={title:n("_M")},a="dd dbv dx","flex-end"==c.h&&(a+=" dbw"),l.class=a,l["mx-click"]=i+"\x1e__ap({type:'h',v:'flex-end'})",d.push(t("li",s,l)),s=[t(0,"\ue614")],l={title:n("_N")},a="dd dbv dx","flex-start"==c.v&&(a+=" dbw"),l.class=a,l["mx-click"]=i+"\x1e__ap({type:'v',v:'flex-start'})",d.push(t("li",s,l)),s=[t(0,"\ue613")],l={title:n("_O")},a="dd dbv dx","center"==c.v&&(a+=" dbw"),l.class=a,l["mx-click"]=i+"\x1e__ap({type:'v',v:'center'})",d.push(t("li",s,l)),s=[t(0,"\ue612")],l={title:n("_P")},a="dd dbv dx","flex-end"==c.v&&(a+=" dbw"),l.class=a,l["mx-click"]=i+"\x1e__ap({type:'v',v:'flex-end'})",d.push(t("li",s,l)),a="dk dbu",r&&(a+=" dbx"),(l={}).class=a,o.push(t("ul",d,l)),t(i,o)},init(e){this.assign(e)},assign(e){return this.__bA=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"__ap<click>"(e){let t=this;if(t.get("disabled"))return;let a=t.__bA,{type:l,v:d}=e.params;a[l]=d,t.__bA=a,t.digest({value:a}),i.default.dispatch(t.root,"input",{value:a})}})}),define("gallery/mx-font/style",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("dk",".dbu{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.dbv{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.dbv:hover{background:#ccc}.dbw,.dbw:hover{background:#fa742b;color:#fff}.dbx,.dbx .dbv{cursor:not-allowed;opacity:.7}.dbx .dbv,.dbx .dbv:hover{background:#e9e9e9}.dbx .dbw,.dbx .dbw:hover{background:#fb955d}"),t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d,s,o=[],r=e.disabled,n=e.i18n,c=e.value;return s=[t(0,"\ue749")],l={title:n("_Q")},a="dd dbv dx",c.bold&&(a+=" dbw"),l.class=a,l["mx-click"]=i+"\x1e__ap({key:'bold'})",d=[t("li",s,l)],s=[t(0,"\ue65f")],l={title:n("_R")},a="dd dbv dx",c.italic&&(a+=" dbw"),l.class=a,l["mx-click"]=i+"\x1e__ap({key:'italic'})",d.push(t("li",s,l)),s=[t(0,"\ue62e")],l={title:n("_S")},a="dd dbv dx",c.underline&&(a+=" dbw"),l.class=a,l["mx-click"]=i+"\x1e__ap({key:'underline'})",d.push(t("li",s,l)),a="dk dbu",r&&(a+=" dbx"),(l={}).class=a,o.push(t("ul",d,l)),t(i,o)},init(e){this.assign(e)},assign(e){return this.__bA=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"__ap<click>"(e){let t=this;if(t.get("disabled"))return;let a=t.__bA,{key:l}=e.params;a[l]=!a[l],t.__bA=a,t.digest({value:a}),i.default.dispatch(t.root,"input",{value:a})}})}),define("gallery/mx-layout/column",["magix","../mx-number/index"],(e,t)=>{e("../mx-number/index"),Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("dl",".dby{display:flex;margin:5px 0;align-items:center}.dbz{flex-basis:24px;text-align:right;color:#333;font-size:12px}.dbA,.dbz{cursor:pointer}.dbB{cursor:not-allowed;color:#bbb}"),t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s)=>{let o,r,n,c,p,_,u,h=[],f=e.columns,g=e.disabled,x=e.i18n;for(let e=0,l=f,d=l.length;e<d;e++){let d=l[e];(n=[]).push(t("div",0,{mxv:"columns",disabled:(o=g,o||0===o?s(a,o):null),"mx-input":i+"\x1e__bC({index:"+e+"})","mx-change":i+"\x1e__bB()",class:"du dh","mx-view":"gallery/mx-number/index?value="+s(a,d.width)+"&max=1&min=0&fixed=2&step=0.01"})),f.length>1&&(u=[t(0,"\ue600")],p="dx dbz",g&&(p+=" dbB"),(_={}).class=p,_.title=x("_T"),_["mx-click"]=i+"\x1e__bE({index:"+e+"})",c=[t("i",u,_)],n.push(...c)),r=[t("div",n,{mxa:"dr:_",class:"dby"})],h.push(...r)}return r=[t(0,"\ue6c5")],p="dx dbA",g&&(p+=" dbB"),(_={}).class=p,_.title=x("_U"),_["mx-click"]=i+"\x1e__bD()",h.push(t("i",r,_)),t(i,h)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()},"__bB<change>"(e){e.stopPropagation()},"__bC<input>"(e){let t=this.get("columns"),{index:a}=e.params;t[a].width=e.value,i.default.dispatch(this.root,"change")},"__bD<click>"(){if(this.get("disabled"))return;let e=this.get("columns");e.push({width:0,elements:[]}),this.digest({columns:e}),i.default.dispatch(this.root,"change")},"__bE<click>"(e){if(this.get("disabled"))return;let t=this.get("columns"),{index:a}=e.params;t.splice(a,1),this.digest({columns:t}),i.default.dispatch(this.root,"change")}})}),define("gallery/mx-layout/guage",["magix","../mx-number/index"],(e,t)=>{e("../mx-number/index"),Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("dm",".dbC{display:flex;align-items:center}.dbD{width:30px}");let a=["__V","__W","__X","__Y"];t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s)=>{let o,r,n,c,p=[],_=e.i18n,u=e.titles,h=e.disabled,f=e.guage;for(let e=0;e<4;e++)c=[t(0,_(u[e]))],(n=[t("div",c,{mxa:"ds:b",class:"dbD"})]).push(t("div",0,{mxv:"guage",disabled:(o=h,o||0===o?s(a,o):null),"mx-input":i+"\x1e__bC({index:"+e+"})","mx-change":i+"\x1e__bB()",class:"du dh","mx-view":"gallery/mx-number/index?max=500&min=0&value="+s(a,f[e])})),r=[t("div",n,{mxa:"ds:a",class:"dbC"})],p.push(...r);return t(i,p)},init(e){this.set({titles:a}),this.assign(e)},assign(e){let{guage:t,disabled:i}=e,a=t.split(" "),l=[];for(let e of a)l.push(parseInt(e,10));return this.set({disabled:i,guage:l}),!0},render(){this.digest()},"__bB<change>"(e){e.stopPropagation()},"__bC<input>"(e){e.stopPropagation();let t=this.get("guage"),{index:a}=e.params;t[a]=e.value,i.default.dispatch(this.root,"change",{value:t.join("px ")+"px"})}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../mx-monitor/index");i.default.applyStyle("dn",".dbE{z-index:400}.dbF{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;cursor:default;padding:2px 0;box-shadow:0 1px 3px 1px rgba(0,0,0,.06)}.dbG{height:22px;line-height:22px;cursor:default;border-radius:2px;padding:0 2px;margin:0 2px}.dbH{color:#fff;background-color:#fa742b}.dbI{height:1px;background:#eee;margin:4px 0}.dbJ{color:#ccc;cursor:not-allowed}"),t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s)=>{let o,r,n,c,p,_,u,h=[],f=e.width,g=e.id,x=e.list,b=e.disabled,m=e.textKey;r=[];for(let e=0,l=x,d=l.length;e<d;e++){let d=l[e];n=[],d.spliter?(c=[t("li",0,{class:"dbI"})],n.push(...c)):(u=[t(0,d[m])],_={},p="dm dbG ",b[d.id]&&(p+=" dbJ"),_.class=p,_["mx-mouseover"]=i+"\x1e__bM({d:"+(b[d.id]||0)+"})",_["mx-mouseout"]=i+"\x1e__bM({d:"+(b[d.id]||0)+"});",_["mx-click"]=i+"\x1e__bz({item:'"+s(a,d)+"',d:"+(b[d.id]||0)+"})",_.title=d[m],c=[t("li",u,_)],n.push(...c)),r.push(...n)}return o=[t("ul",r,{mxa:"dt:_",class:"dbF dk"})],h.push(t("div",o,{style:"width:"+f+"px;position:absolute;left:-10000px;top:-10000px",class:"dbE",id:"cnt_"+g,"mx-contextmenu":i+"\x1e__A()"})),t(i,h)},init(e){let t=this;t.assign(e),a.default.__aM(),t.on("destroy",()=>{a.default.__aB(t),a.default.__aN()})},assign(e){let t=this,i=e.width||140,a=e.valueKey||"id",l=e.textKey||"text";return t.__bF=e.list,t.__bG=i,t.__bH=a,t.__bI=l,t.__bJ=e.disabled||{},t.__bK=e.picked,!0},render(){let e=this;e.digest({disabled:e.__bJ,list:e.__bF,width:e.__bG,valueKey:e.__bH,textKey:e.__bI})},__ba(e){return i.default.inside(e,this.root)},__x(e){let t=this;if(!t.__bL){t.__bL=1;let l=i.node("cnt_"+t.id),d=l.clientWidth,s=l.clientHeight,o=e.pageX,r=e.pageY;o+d>window.innerWidth&&(o-=d)<0&&(o=0),r+s>window.innerHeight&&(r-=s)<0&&(r=0),l.style.left=o+"px",l.style.top=r+"px",a.default.__aA(t)}},__y(){let e=this;if(e.__bL){e.__bL=!1,i.node("cnt_"+e.id).style.left="-10000px",a.default.__aB(e)}},"__bM<mouseover,mouseout>"(e){if(e.params.d)return;let t=e.eventTarget;!i.default.inside(e.relatedTarget,t)&&t.classList["mouseout"==e.type?"remove":"add"]("dbH")},"__bz<click>"(e){if(e.params.d)return;this.__y();let t=this.__bK;t&&t(e.params.item)},"__A<contextmenu>"(e){e.preventDefault()}},{show(e,t,a){let l="ctx_"+e.id,d=i.node(l),s=d&&i.default.Vframe.get(d);s?(s.invoke("assign",[a]),s.invoke("render"),s.invoke("__x",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${l}"></div>`),(s=e.owner.mountVframe(i.node(l),"gallery/mx-menu/index",a)).invoke("__x",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=0,a=[],l=["mousedown","keyup","touchstart","pointerstart"],d=e=>{for(let t=a.length;t--;){let i=a[t];if(i.__bN)a.splice(t,1);else{let t=i.__bO;"resize"!=e.type&&t.__ba(e.target)||t.__y()}}},s=e=>{let t=a[e.id];t&&(t.__bN=!0),delete a[e.id]};t.default={__aA(e){s(e);let t={__bO:e};a.push(t),a[e.id]=t},__aB:s,__aM(){if(!i){for(let e of l)document.addEventListener(e,d);window.addEventListener("resize",d)}i++},__aN(){if(i>0&&!--i){for(let e of l)document.removeEventListener(e,d);window.removeEventListener("resize",d)}}}}),define("gallery/mx-number/index",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("do",'.dbK{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block}.dbL,.dbM{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:2px;cursor:pointer}.dbL:hover,.dbM:hover{background-color:#f0f0f0}.dbM{top:1px}.dbL{bottom:1px}.dbN:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.dbL:after{border-top:4px solid #ccc}.dbM:after{border-bottom:4px solid #ccc}.dbL.dbO,.dbM.dbO{cursor:not-allowed;border-color:transparent}.dbL.dbO:hover,.dbM.dbO:hover{background-color:transparent}'),t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d=[],s=e.id,o=e.disabled;return d.push(t("input",0,{class:"dbK",id:"ipt_"+s,"mx-focusin":i+"\x1e__cg()","mx-focusout":i+"\x1e__ci()","mx-change":i+"\x1e__cf()","mx-keydown":i+"\x1e__cn()",disabled:!!o||null,autocomplete:"off","mx-input":i+"\x1e__co()"},1)),a="dbM dbN dk",o&&(a+=" dbO"),(l={}).class=a,l["mx-click"]=i+"\x1e__cb({i:1})",l["mx-mousedown"]=i+"\x1e__cm({i:1})",l["mx-contextmenu"]=i+"\x1e__A()",d.push(t("span",0,l)),a="dbL dbN dk",o&&(a+=" dbO"),(l={}).class=a,l["mx-click"]=i+"\x1e__cb()",l["mx-mousedown"]=i+"\x1e__cm()",l["mx-contextmenu"]=i+"\x1e__A()",d.push(t("span",0,l)),t(i,d)},init(e){this.assign(e)},assign(e){let t=this,a=e.value;void 0===a&&(a=""),""!==a&&(a=+a);let l=t.__bP!==a,d=t.__bQ;return t.__bP=a,t.__bR=+e.step||1,t.__bS=e.empty+""=="true",t.__bT=e.format+""=="true",t.__bQ=t.root.hasAttribute("disabled"),t.__bU=i.default.has(e,"max")?+e.max:Number.MAX_VALUE,t.__bV=i.default.has(e,"min")?+e.min:-Number.MAX_VALUE,t.__bW=+e.ratio||10,t.__bX=e.fixed||0,l||d!=t.__bQ},render(){let e=this;e.digest({disabled:e.__bQ},null,()=>{e.__bY()})},__bY(){let e=this,t=e.__bP;""!==t&&(t=e.__bZ(t),e.__bT&&(t=t.toFixed(e.__bX))),e.__c_=i.node("ipt_"+e.id),e.__c_.value=t},__bZ(e){let t=this;if((e=+e)||0===e){let i=t.__bU,a=t.__bV;e>i?e=i:e<a&&(e=a),e=+e.toFixed(t.__bX)}return isNaN(e)?t.__bS?"":0:e},__ca(e,t){let a=this;if(""!==e||!a.__bS)return(e=a.__bZ(e))!==a.__bP&&(t||(a.__c_.value=e),i.default.dispatch(a.root,"input",{value:a.__bP=e})),a.__bP;i.default.dispatch(a.root,"input",{value:a.__bP=e})},__cb(e,t){let i=this.__bP;""===i&&(i=0);let a=this.__bR,l=i;t&&(a*=this.__bW),e?l+=a:l-=a,this.__ca(l)},__cc(){let e=this.__c_;e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},__ce(){let e=this;e.root.classList.add("dw"),i.default.has(e,"__cd")||(e.__cd=e.__bP)},"__cf<change>"(e){e.stopPropagation()},"__cg<focusin>"(){this.__ce()},"__ci<focusout>"(e){let t=this;t.__ch||(t.root.classList.remove("dw"),t.__bY(),t.__cd!=t.__bP&&i.default.dispatch(t.root,"change",{value:t.__bP}),delete t.__cd)},"__cb<click>"(e){let t=this;t.__bQ||t.__cj||(t.__cb(e.params.i,e.shiftKey),t.__cc())},"__cm<mousedown>"(e){let t=this;if(!t.__bQ){t.__ch=!0,t.__ce();let i=e.params.i;t.__ck=setTimeout(t.wrapAsync(()=>{t.__cl=setInterval(t.wrapAsync(()=>{t.__cj=!0,t.__cb(i),t.__cc()}),50)}),300)}},"__cn<keydown>"(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();let t=this;if(!t.__bQ){let i=e.eventTarget.value;if(""===i)t.__bP="";else{let e=Number(i);(e||0===e)&&e!=t.__bP&&(t.__bP=e)}t.__cb(38==e.keyCode,e.shiftKey)}}},"__A<contextmenu>"(e){e.preventDefault()},"__co<input>"(e){e.stopPropagation();let t=e.eventTarget;this.__ca(t.value,!0)},"$doc<mouseup>"(){let e=this;clearTimeout(e.__ck),clearInterval(e.__cl),delete e.__ch,setTimeout(e.wrapAsync(()=>{delete e.__cj}),0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../mx-dialog/index");i.default.applyStyle("dp",".dbP{height:100px;padding:4px;border:1px solid #e6e6e6;background:#fff;cursor:pointer;margin:4px 0}.dbQ{line-height:92px;text-align:center;color:#999}.dbR{min-height:500px}.dbS{width:100px;height:100px;margin:4px;overflow:hidden;border:1px solid #e6e6e6;cursor:pointer;padding:4px}.dbS:hover{border-color:#999}.dbT{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.dbU{width:100px;margin:0 5px;height:25px}.dbV{margin:30px 0}.dbW{font-size:16px}.dbX{position:absolute;right:3px;top:2px;opacity:.2}.dbX:hover{opacity:.5}"),t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d,s,o=[],r=e.src,n=e.i18n;return a=[],r?(s=[t(0,"\ue67f")],d=[t("i",s,{class:"d_ dbX","mx-click":i+"\x1e__cr()",title:n("_Z")})],l=[t("div",d,{class:"dbT",style:"background-image:url('"+r+"')"})],a.push(...l)):(d=[t(0,n("_a_"))],l=[t("div",d,{mxa:"dv:c",class:"dbQ"})],a.push(...l)),o.push(t("div",a,{mxa:"dv:_",class:"dbP dh","mx-click":i+"\x1e__cq()"})),t(i,o)},mixins:[a.default],init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()},"__cq<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:932,done(t){e.digest(t),e.__cp(t)}})},__cp(e){i.default.dispatch(this.root,"change",e)},"__cr<click>"(e){e.stopPropagation(),this.digest({src:""}),this.__cp({src:"",width:0,height:0})}})}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../../designer/service"),l=e("../../i18n/index");t.default=i.default.View.extend({mixins:[a.default],tmpl:(e,t,i,a,l,d,s,o)=>{let r,n,c,p,_,u=[],h=e.i18n,f=e.error,g=e.list;if(n=[t(0,h("_ab"))],r=[t("h5",n)],u.push(t("div",r,{mxa:"dw:_",class:"dp dF"})),r=[],f)c=[t(0,f.msg)],n=[t("div",c,{mxa:"dw:c",class:"dc dbV dbW"})],r.push(...n);else{n=[];for(let e=0,a=g,l=a.length;e<l;e++){let l=a[e];_=[t("div",0,{class:"dbT",style:"background-image:url('"+l.src+"')"})],p=[t("div",_,{class:"dbS","mx-click":i+"\x1e__ct({src:'"+o(l.src)+"'})"})],_=[t(0,l.title)],p.push(t("div",_,{mxa:"dw:e",class:"dc dbU dm"})),c=[t("div",p,{class:"dd",title:l.title})],n.push(...c)}r.push(...n)}return u.push(t("div",r,{mxa:"dw:a",class:"dq dj dbR"})),t(i,u)},init(e){this.__be=e.dialog,this.__cs=e.done},render(){this.fetch(["__ak"],(e,t)=>{this.digest({error:e,list:t.get("data",[])})})},"__ct<click>"(e){let t=this,i=new Image,a=t.__cs,d=e.params.src;i.onerror=t.wrapAsync(()=>{t.alert(l.default("__aa"))}),i.onload=t.wrapAsync(()=>{let e=i.width,l=i.height;t.__be.close(),a({src:d,width:e,height:l})}),i.src=d}})}),define("gallery/mx-pointer/cursor",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=i.default.guid("cursor_");i.default.applyStyle("dq",".dbY{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}"),t.default={__x(e){let t=getComputedStyle(e);this.__cu(t.cursor)},__cu(e){let t=i.node(a);t||(document.body.insertAdjacentHTML("beforeend",`<div class="dbY" id="${a}"/>`),t=i.node(a)),t.style.cursor=e,t.style.display="block"},__y(){i.node(a).style.display="none"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("dr",".dbZ{background:#fa742b;position:absolute;opacity:.6;left:-1000px;top:-1000px;width:30px;height:30px;text-align:center;line-height:30px;color:#fff;border-radius:2px;z-index:5000}");let a=i.default.guid("de_");t.default={__K(e){let t=i.node(a);t||(document.body.insertAdjacentHTML("beforeend",`<div class="dbZ dx" id="${a}"/>`),t=i.node(a)),t.innerHTML=e},__x(e){let t=i.node(a).style;t.left=e.pageX+10+"px",t.top=e.pageY+18+"px"},__y(){let e=i.node(a).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("ds",".dc_{position:absolute;border:1px dashed #fa742b;display:none}");let a=i.default.guid("set_");t.default={__cv(){i.node(a)||document.body.insertAdjacentHTML("beforeend",`<div id="${a}" class="dc_"></div>`)},__K(e,t,l,d){let s=i.node(a).style;s.left=e+"px",s.top=t+"px",s.width=l+"px",s.height=d+"px",s.display="block"},__y(){i.node(a).style.display="none"}}}),define("gallery/mx-runner/index",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");let a=window.requestAnimationFrame||(e=>setTimeout(e,16)),l=window.cancelAnimationFrame||clearTimeout,d=Date.now;t.default={__cw:[],__aG(e,t){this.__cw.push({i:e||15,f:t,n:d()}),this.__cx()},__aH(e){let t=this.__cw;for(let i,a=0;a<t.length;a++)if(!(i=t[a]).r&&i.f==e){i.r=1;break}},__cx(){let e=this;if(!e.__cy){let t=()=>{let s=e.__cw;for(let e,t,a=0;a<s.length;a++)(e=s[a]).r?s.splice(a--,1):(t=d())-e.n>=e.i&&(e.n=t,i.default.toTry(e.f));s.length?e.__cy=a(t):(l(e.__cy),delete e.__cy)};e.__cy=a(t)}}}}),define("i18n/index",["magix","./zh-cn"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a={"zh-cn":e("./zh-cn").default},l=i.default.has,d=/\{(\d+)\}/g;t.default=((e,...t)=>{let s=(i.default.config("lang")||navigator.language).toLowerCase();l(a,s)||(s="zh-cn");let o=a[s],r=l(o,e)?o[e]:e;return t.length&&(r=r.replace(d,(e,i,a)=>(i|=0,t.length>i?(a=t[i],l(o,a)?o[a]:a):e))),r})}),define("i18n/zh-cn",[],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={_b:"\u62a5\u8868\u8bbe\u8ba1\u5668",__H:"\u63d0\u793a",_I:"\u786e\u5b9a",_J:"\u53d6\u6d88",__ac:"\u653e\u5927",__ad:"\u7f29\u5c0f",__:"\u5220\u9664\u8f85\u52a9\u7ebf",_a:"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf",_d:"\u64a4\u9500(Ctrl+Z)",_e:"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)",__ae:"\u6309\u4e0b\u79fb\u52a8\u9762\u677f",__af:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6",__ag:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6",__ah:"\u5c5e\u6027",__ai:"\u6570\u636e\u6e90",_g:"\u6253\u5f00{0}\u9762\u677f",_f:"\u5173\u95ed{0}\u9762\u677f",__aj:"\u5c55\u5f00{0}\u9762\u677f",__ak:"\u6298\u53e0{0}\u9762\u677f",__al:"\u7c7b\u578b\uff1a",__p:"\u80cc\u666f\u989c\u8272\uff1a",__C:"\u6587\u5b57\u989c\u8272\uff1a",_c:"\u5220\u9664",__aa:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",_Z:"\u6e05\u9664\u56fe\u7247",_a_:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",_ab:"\u56fe\u7247\u5e93",_G:"\u6e05\u9664\u989c\u8272",__z:"\u5b57\u53f7\uff1a",__q:"\u80cc\u666f\u56fe\u7247\uff1a",__r:"\u80cc\u666f\u5e73\u94fa\uff1a",__s:"\u62c9\u4f38\u94fa\u6ee1",__t:"\u539f\u59cb\u5c3a\u5bf8",__u:"\u6a2a\u5411\u5e73\u94fa",__v:"\u5782\u76f4\u5e73\u94fa",__w:"\u53cc\u5411\u5e73\u94fa",__l:"\u9501\u5b9a\u7f16\u8f91\uff1a",__n:"\u6700\u5c0f\u5bbd\u5ea6\uff1a",__o:"\u6700\u5c0f\u9ad8\u5ea6\uff1a",__i:"\u5217\u5206\u914d\uff1a",__j:"\u5916\u8fb9\u8ddd\uff1a",__k:"\u5185\u8fb9\u8ddd\uff1a",__y:"\u9ad8\uff1a",__h:"\u5e03\u5c40",__x:"\u6587\u672c",__m:"\u9875\u9762",_U:"\u70b9\u51fb\u6dfb\u52a0\u5217",_T:"\u70b9\u51fb\u5220\u9664\u5217",__A:"\u900f\u660e\u5ea6\uff1a",__B:"\u5b57\u95f4\u8ddd\uff1a",__F:"\u5185\u5bb9\uff1a",__D:"\u6837\u5f0f\uff1a",__E:"\u6392\u5217\uff1a",_Q:"\u52a0\u7c97",_R:"\u659c\u4f53",_S:"\u4e0b\u5212\u7ebf",_K:"\u6c34\u5e73\u5c45\u5de6",_L:"\u6c34\u5e73\u5c45\u4e2d",_M:"\u6c34\u5e73\u5c45\u53f3",_N:"\u5782\u76f4\u5c45\u4e0a",_O:"\u5782\u76f4\u5c45\u4e2d",_P:"\u5782\u76f4\u5c45\u4e0b",__V:"\u4e0a",__W:"\u53f3",__X:"\u4e0b",__Y:"\u5de6"}}),define("panels/index",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");let a=[{title:"__ah",icon:"&#xe7a1;",width:240,height:120,right:10,top:90,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"},{title:"__ai",icon:"&#xe609;",width:200,height:120,show:!1,right:260,top:90,id:"p-data",view:"panels/data/index"}],l=i.default.toMap(a,"id");t.default={__Z(){for(let e of a)e.show&&this.__cz(e.id,!0);i.State.fire("__i")},__cz(e,t){let a=l[e];if(!a.opened){if(a.opened=1,a.eId)i.node(a.eId).style.display="block";else{a.eId=i.default.guid("panel_");let e=i.node(i.default.config("rootId"));e.insertAdjacentHTML("beforeend",`<div id="${a.eId}"></div>`);let t=i.Vframe.get(e);a.close=(()=>{this.__cA(a.id)}),t.mountVframe(i.node(a.eId),"panels/panel",a)}if(!t){i.State.fire("__i"),i.Vframe.get(i.node(a.eId)).invoke("__x")}}},__cA(e){let t=l[e];if(t.opened){t.opened=0;let e=i.node(t.eId);e.style.display="none",i.State.fire("__i"),i.Vframe.get(e).invoke("__y")}},__az(e){l[e].opened?this.__cA(e):this.__cz(e)},__ay:()=>a}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../gallery/mx-pointer/cursor"),l=e("../gallery/mx-dragdrop/index");i.default.applyStyle("dt",".dca{background:hsla(0,0%,100%,.93);position:absolute;box-shadow:0 2px 4px 0 rgba(0,0,0,.3)}.dcb{font-size:12px;height:18px;line-height:18px;background:#fa742b;color:#fff}.dcc{padding:0 5px;cursor:move;width:calc(100% - 36px)}.dcd{width:16px;height:14px;margin:0 1px;font-size:11px;cursor:pointer;display:inline-flex;justify-content:center;align-items:center;border-radius:2px}.dcd:hover{background:#e64e30}.dce{overflow:hidden;transition:height .25s}.dcf{transition:none}.dcg{width:calc(100% - 2px);overflow:auto;float:left}.dch{width:2px;float:right;cursor:ew-resize}.dci,.dch{background:#fafafa}.dci{height:2px;cursor:ns-resize}.dcj::-webkit-scrollbar,.dcj::-webkit-scrollbar-corner{height:2px;width:2px;background:#fafafa}");let d=[],s={__aA(e){d.push(e)},__aB(e){for(let t=d.length;t--;)if(d[t]==e){d.splice(t,1);break}this.__cB()},__cB(){for(let e=d.length;e--;)d[e].__cC(300+e)},__cD(e){if(d[d.length-1]!=e){for(let t=d.length;t--;)if(d[t]==e){d.splice(t,1);break}d.push(e),this.__cB()}}};t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d,s,o,r,n,c=[],p=e.width,_=e.left,u=e.right,h=e.top,f=e.zIndex,g=e.id,x=e.i18n,b=e.icon,m=e.title,y=e.shrink,v=e.height,w=e.resizeX,k=e.view,A=e.resizeY;return r=[t(0,b,1)],(o=[t("i",r,{class:"dx dy dz"})]).push(t(0,x(m))),s=[t("div",o,{class:"dcc dd",title:x("__ae"),"mx-mousedown":i+"\x1e__cF()"})],r=[t(0,"\ue73a")],n="dx dcd",y&&(n+=" dA"),(l={}).class=n,l["mx-click"]=i+"\x1e__cI()",l.title=x(y?"__aj":"__ak",m),o=[t("i",r,l)],r=[t(0,"\ue635")],o.push(t("i",r,{class:"dx dcd","mx-click":i+"\x1e__bm()",title:x("_f",m)})),s.push(t("div",o,{mxa:"dy:a",class:"de dE db"})),d=[t("div",s,{mxa:"dy:_",class:"dcb dk dj"})],(s=[]).push(t("div",0,{style:"width:"+(w?"calc(100% - 2px)":"100%"),class:"dcg dl dcj db","mx-view":k})),w||(o=[t("div",0,{class:"dch dk db",title:x("__af"),"mx-mousedown":i+"\x1e__cG({w:1})"})],s.push(...o)),d.push(t("div",s,{class:"dce",id:"c_"+g,style:"height:"+(y?0:`calc(100vh - ${v}px)`)})),n="dci dk",!y&&A||(n+=" di"),(l={}).class=n,l.title=x("__ag"),l["mx-mousedown"]=i+"\x1e__cG({h:1})",d.push(t("div",0,l)),a="width:"+p+"px;",a+=0===_||_?"left:"+_:"right:"+u,(l={class:"dca"}).style=a+="px;top:"+h+"px;z-index:"+f+";",l.id="p_"+g,l["mx-mousedown"]=i+"\x1e__cH()",c.push(t("div",d,l)),t(i,c)},mixins:[l.default],init(e){s.__aA(this),this.on("destroy",()=>{s.__aB(this)}),this.__cE=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,view:e.view,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+d.length})},"__cF<mousedown>"(e){let t=i.node("p_"+this.id).style,l=this.get("left"),d=this.get("width"),s=0;void 0===l&&(s=1,l=this.get("right"));let o=this.get("top"),r=s?"right":"left",n=0,c=e.eventTarget;this.__w(e,i=>{n||(n=1,a.default.__x(c));let p=(s?e.pageX-i.pageX:i.pageX-e.pageX)+l;p<0?p=0:p+d>window.innerWidth&&(p=window.innerWidth-d);let _=i.pageY-e.pageY+o;_<0?_=0:_+18>window.innerHeight&&(_=window.innerHeight-18),t[r]=p+"px",t.top=_+"px",this.set({[r]:p,top:_})},()=>{a.default.__y()})},"__cG<mousedown>"(e){let{w:t}=e.params,l=this.get("width"),d=this.get("height"),s=this.get("right"),o=i.node("c_"+this.id);o.classList.add("dcf");let r=o.style,n=i.node("p_"+this.id).style,c=0,p=e.eventTarget;this.__w(e,i=>{if(c||(c=1,a.default.__x(p)),t){let t=i.pageX-e.pageX;t+l<100&&(t=100-l);let a=t+l;n.width=a+"px",(s||0===d)&&(n.right=s-t+"px",this.set({right:s-t})),this.set({width:a})}else{let t=e.pageY-i.pageY+d;r.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{a.default.__y(),o.classList.remove("dcf")})},__cC(e){i.node("p_"+this.id).style.zIndex=e},"__cH<mousedown>"(){s.__cD(this)},__x(){s.__cD(this)},__y(){},"__cI<click>"(){this.digest({shrink:!this.get("shrink")})},"__bm<click>"(){let e=this.__cE;e&&i.default.toTry(e)}})}),define("panels/data/index",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a=[];return a.push(t(0,"data source panel")),t(i,a)},render(){this.digest()}})}),define("panels/props/index",["magix","../../designer/props","../../designer/history","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-layout/column","gallery/mx-layout/guage","gallery/mx-font/style","gallery/mx-font/align","./page"],(e,t)=>{e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-layout/column"),e("gallery/mx-layout/guage"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("./page"),Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../../designer/props"),l=e("../../designer/history");i.default.applyStyle("du",'.dck{padding:4px;min-width:200px}.dcl{line-height:28px;display:flex;align-items:center}.dcm{width:80px;text-align:right}.dcn{height:1px;line-height:1px;margin:5px 0;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.dco{width:140px}.dcp{height:90px}.dcq{align-items:flex-start}.dcr{display:flex;align-items:center;cursor:pointer}.dcs{visibility:hidden;position:absolute}.dct{width:32px;height:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;border-radius:22px;background:#ccc}.dct:before{content:"";width:12px;height:12px;position:absolute;left:0;margin:2px;border-radius:50%;background:#fff;transition:all .25s}.dcs:checked+.dct{background:#fa742b}.dcs:checked+.dct:before{left:100%;margin-left:-14px}.dcs:disabled+.dct{background:#e6e6e6;cursor:not-allowed}'),t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s,o)=>{let r,n,c,p,_,u,h,f,g,x,b,m,y=[],v=e.elements,w=e.i18n,k=e.props;if(1==v.length){var A=v[0];c=[],_=[t(0,w("__al"))],p=[t("span",_,{mxa:"dz:c",class:"dcm"})],_=[t(0,w(A.ctrl.title))],p.push(t("span",_)),c.push(t("li",p,{mxa:"dz:b",class:"dcl"}));for(let e=0,l=A.ctrl.props,n=l.length;e<n;e++){let n=l[e];if(p=[],n.type==k.__ab)_=[t("li",0,{class:"dcn"})],p.push(..._);else{_=[];var S=A.props[n.key];n.ifShow&&!n.ifShow(A.props)||(g=[],x=[t(0,w(n.tip))],g.push(t("span",x,{mxa:"dz:f",class:"dcm"})),n.type==k.__a_?(f={mxv:"elements",class:"dco du dh",disabled:(r=A.props.locked,r||0===r?s(a,r):null),"mx-input":i+"\x1e__cK({key:'"+o(n.key)+"',use:'value',element:'"+s(a,A)+"'})"},b="gallery/mx-number/index?value="+s(a,S),((r=n.max)||0===r)&&(b+="&max="+d(r)),((r=n.step)||0===r)&&(b+="&step="+d(r)),((r=n.fixed)||0===r)&&(b+="&fixed="+d(r)),((r=n.min)||0===r)&&(b+="&min="+d(r)),f["mx-view"]=b,x=[t("div",0,f)],g.push(...x)):n.type==k.__aa?(x=[t("div",0,{mxv:"elements",class:"dco","mx-input":i+"\x1e__cK({key:'"+o(n.key)+"',use:'color',element:'"+s(a,A)+"'})","mx-view":"gallery/mx-color/index?clear="+d(n.clear)+"&color="+s(a,S)+"&align=right&disabled="+d(A.props.locked)+"&alpha="+d(n.alpha)})],g.push(...x)):n.type==k.__ac?((m=[t("input",0,{class:"dcs",type:"checkbox",checked:!!A.props[n.key]||null,"mx-change":i+"\x1e__cK({key:'"+o(n.key)+"',bool:1,element:'"+s(a,A)+"',refresh:'"+s(a,n.refresh)+"'})"},1)]).push(t("i",0,{mxs:"dz:a",class:"dct"})),x=[t("label",m,{mxa:"dz:j",class:"dcr"})],g.push(...x)):n.type==k.__ad?(x=[t("div",0,{mxv:"elements",class:"dco","mx-change":i+"\x1e__cK({key:'"+o(n.key)+"',element:'"+s(a,A)+"'})","mx-view":"gallery/mx-layout/column?columns="+s(a,S)+"&disabled="+s(a,A.props.locked)})],g.push(...x)):n.type==k.__ae?(x=[t("div",0,{mxv:"elements",class:"dco","mx-change":i+"\x1e__cK({key:'"+o(n.key)+"',use:'value',element:'"+s(a,A)+"'})","mx-view":"gallery/mx-layout/guage?guage="+s(a,S)+"&disabled="+s(a,A.props.locked)})],g.push(...x)):n.type==k.__ah?(x=[t("textarea",0,{class:"dv dco dcp",disabled:!!A.props.locked||null,"mx-input":i+"\x1e__cK({key:'"+o(n.key)+"',ta:1,element:'"+s(a,A)+"'})",value:S})],g.push(...x)):n.type==k.__af?(x=[t("div",0,{mxv:"elements",class:"dco","mx-input":i+"\x1e__cK({key:'"+o(n.key)+"',use:'value',element:'"+s(a,A)+"'})","mx-view":"gallery/mx-font/style?disabled="+s(a,A.props.locked)+"&value="+s(a,S)})],g.push(...x)):n.type==k.__ag&&(x=[t("div",0,{mxv:"elements",class:"dco","mx-input":i+"\x1e__cK({key:'"+o(n.key)+"',use:'value',element:'"+s(a,A)+"'})","mx-view":"gallery/mx-font/align?disabled="+s(a,A.props.locked)+"&value="+s(a,S)})],g.push(...x)),f={},h="dcl",n.dockTop&&(h+=" dcq"),f.class=h,u=[t("li",g,f)],_.push(...u)),p.push(..._)}c.push(...p)}n=[t("ul",c,{mxa:"dz:a",class:"dck"})],y.push(...n)}else n=[t("div",0,{"mx-view":"panels/props/page"})],y.push(...n);return t(i,y)},init(){let e=this.__cJ(this.render.bind(this),100);i.State.on("__g",e),i.State.on("__j",e),i.State.on("___",e)},render(){this.digest({scale:i.State.get("__c"),props:a.default,elements:i.State.get("__P")})},"__cK<input,change>"(e){let{key:t,use:a,element:d,refresh:s,ta:o,bool:r}=e.params;if(a||r||o){let i=d.props,l=e.eventTarget,s=o?l.value:r?l.checked:e[a];i[t]=s}s&&(this.render(),i.State.fire("__h"));let n=i.node(d.id),c=i.Vframe.get(n);c&&c.invoke("__K",[d]),l.default.__s("___"+t,500)}})}),define("panels/props/page",["magix","../../designer/history","../../designer/props","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t)=>{e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index"),Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../../designer/history"),l=e("../../designer/props");t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s,o)=>{let r,n,c,p,_,u,h,f,g,x=[],b=e.i18n,m=e.ctrl,y=e.props,v=e.page;n=[],p=[t(0,b("__al"))],c=[t("span",p,{mxa:"dA:b",class:"dcm"})],p=[t(0,b(m.title))],c.push(t("span",p)),n.push(t("li",c,{mxa:"dA:a",class:"dcl"}));for(let e=0,l=m.props,x=l.length;e<x;e++){let x=l[e];c=[],x.type==y.__ab?(p=[t("li",0,{class:"dcn"})],c.push(...p)):x.ifShow&&!x.ifShow(v)||(h=[],f=[t(0,b(x.tip))],h.push(t("span",f,{mxa:"dA:d",class:"dcm"})),x.type==y.__a_?(u={mxv:"page,ctrl",class:"dco du dh","mx-input":i+"\x1e__cK({key:'"+o(x.key)+"',use:'value'})"},g="gallery/mx-number/index?value="+s(a,v[x.key]),((r=x.max)||0===r)&&(g+="&max="+d(r)),((r=x.step)||0===r)&&(g+="&step="+d(r)),((r=x.fixed)||0===r)&&(g+="&fixed="+d(r)),((r=x.min)||0===r)&&(g+="&min="+d(r)),u["mx-view"]=g,f=[t("div",0,u)],h.push(...f)):x.type==y.__aa?(f=[t("div",0,{mxv:"page,ctrl",class:"dco","mx-input":i+"\x1e__cK({key:'"+o(x.key)+"',use:'color'})","mx-view":"gallery/mx-color/index?clear="+d(x.clear)+"&color="+s(a,v[x.key])+"&align=right&alpha="+d(x.alpha)})],h.push(...f)):x.type==y.__ai?(f=[t("div",0,{class:"dco","mx-change":i+"\x1e__cK({key:'"+o(x.key)+"',use:'src',refresh:'"+s(a,x.refresh)+"',write:'"+s(a,x.write)+"'})","mx-view":"gallery/mx-picture/index?src="+d(v[x.key])})],h.push(...f)):x.type==y.__aj&&(f=[t("div",0,{mxv:"ctrl",class:"dco","mx-change":i+"\x1e__cK({key:'"+o(x.key)+"',use:'value'})","mx-view":"gallery/mx-dropdown/index?selected="+d(v[x.key])+"&list="+s(a,x.items)+"&textKey=text&valueKey=value"})],h.push(...f)),u={},_="dcl",x.dockTop&&(_+=" dcq"),u.class=_,p=[t("li",h,u)],c.push(...p)),n.push(...c)}return x.push(t("ul",n,{mxa:"dA:_",class:"dck"})),t(i,x)},init(){let e=this.render.bind(this);i.State.on("___",e)},render(){this.digest({props:l.default,ctrl:i.State.get("__Y"),page:i.State.get("__N")})},"__cK<input,change>"(e){let{key:t,use:l,refresh:d,write:s}=e.params,o=i.State.get("__N");o[t]=e[l],s&&s(o,e),a.default.__s("__a",500),i.State.fire("__a"),d&&this.render()}})}),define("elements/designer",["magix","../gallery/mx-dragdrop/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../gallery/mx-dragdrop/index");i.default.applyStyle("df",".das{pointer-events:none}.dat{display:flex}.dau{position:absolute;left:0;top:0;right:0;bottom:0;background:transparent}.dav,.daw{border:1px solid #fa742b}.daw{border-color:#999}.dax{border:1px dotted #ddd;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.day{border-style:dashed}");let l={},d=()=>{for(let e in l){let t=l[e],a=i.Vframe.get(t);a&&(a.invoke("__aL"),a.invoke("render"))}};i.State.on("___",d),i.State.on("__g",d),t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s)=>{let o,r,n,c=[],p=e.element,_=e.view,u=e.id,h=e.selected;o="";var f=p.props;o+=" ";var g=p.ctrl;return n={mxv:"element"},r="dax",f.locked&&(r+=" day"),"layout"==g.role?r+=" dat":r+=" das",n.class=r,n["mx-view"]=_+"?element="+s(a,p)+"&props="+s(a,f),n.id="entity_"+u,c.push(t("div",0,n)),n={},r="dau","layout"==g.role&&(r+=" das"),h&&(f.locked?r+=" daw":r+=" dav"),n.class=r,c.push(t("div",0,n)),t(i,c)},mixins:[a.default],ctor(e){this.assign(e),l[this.id]=this.root,this.on("destroy",()=>{delete l[this.id]})},__aL(){let e=i.State.get("__X"),t=i.State.get("__P").length,a=this.get().element.id;this.set({selected:i.has(e,a),count:t})},assign(e){return this.set(e),this.__aL(),!0},render(){this.digest()},__K(e){this.digest({element:e})}})}),define("elements/index",["magix","./layout/designer","./text/designer","./page/designer"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("./layout/designer"),l=e("./text/designer"),d=e("./page/designer");let s=[a.default,l.default],o=i.toMap(s,"type"),r=[a.default,{spliter:1},l.default,{icon:"&#xe629;",title:"\u56fe\u8868",subs:[l.default,l.default,l.default,l.default,l.default,l.default,l.default,l.default]}];t.default={__J:()=>r,__V:()=>d.default,__W(e){let t={},i=e=>{for(let a of e){let e=o[a.type];if(a.ctrl=e,t[a.id]=a,"layout"==a.role)for(let e of a.props.columns)i(e.elements)}};return i(e),{elements:e,map:t}}}}),define("elements/layout/designer",["../designer","../../designer/props"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../designer"),a=e("../../designer/props");t.default=i.default.extend({ctor(){this.set({view:"elements/layout/index"})}},{type:"layout",role:"layout",title:"__h",icon:"&#xe764;",getProps:()=>({columns:[{width:1,elements:[]}],margin:"5px 5px 5px 5px",padding:"5px 5px 5px 5px",locked:!1}),props:[{tip:"__i",key:"columns",dockTop:!0,type:a.default.__ad},{tip:"__j",key:"margin",dockTop:!0,type:a.default.__ae},{tip:"__k",key:"padding",dockTop:!0,type:a.default.__ae},{type:a.default.__ab},{tip:"__l",key:"locked",type:a.default.__ac,refresh:!0,free:!0}]})}),define("elements/layout/index",["magix","../../designer/workspace","../../gallery/mx-dragdrop/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../../designer/workspace"),l=e("../../gallery/mx-dragdrop/index");i.default.applyStyle("dg",".daz{display:flex;width:100%;min-height:40px}.daA{flex-shrink:1;overflow:hidden;border:1px dashed #ccc}"),t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s)=>{let o,r,n,c,p=[],_=e.props,u=e.element;o=[];for(let e=0,l=_.columns,d=l.length;e<d;e++){let d=l[e];n=[];for(let e=0,l=d.elements,o=l.length;e<o;e++){let d=l[e];c=[t("div",0,{mxv:"props",class:"dh",id:d.id,eid:d.id,"mx-view":"elements/"+d.ctrl.role+"/designer?element="+s(a,d),"mx-mousedown":i+"\x1e__ao({element:'"+s(a,d)+"'})",role:d.ctrl.role})],n.push(...c)}r=[t("div",n,{style:"flex-basis:"+100*d.width+"%;",class:"daA",role:"column",index:e,pid:u.id})],o.push(...r)}return p.push(t("div",o,{style:"margin:"+_.margin+";padding:"+_.padding+";",class:"daz"})),t(i,p)},mixins:[l.default],init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()},"__ao<mousedown>"(e){"layout"!=e.from&&(e.from="layout",a.StageElements.__an(e,this))}})}),define("elements/page/designer",["../../designer/props","../../i18n/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),a=e("../../i18n/index");t.default={title:"__m",getProps:()=>({width:900,height:500,background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0}),props:[{tip:"__n",key:"width",type:i.default.__a_,min:"0"},{tip:"__o",key:"height",type:i.default.__a_,min:"0"},{type:i.default.__ab},{tip:"__p",key:"background",type:i.default.__aa},{tip:"__q",dockTop:!0,key:"backgroundImage",type:i.default.__ai,refresh:!0,write(e,t){e.backgroundWidth=t.width,e.backgroundHeight=t.height}},{tip:"__r",key:"backgroundRepeat",type:i.default.__aj,items:[{text:a.default("__s"),value:"full"},{text:a.default("__t"),value:"no-repeat"},{text:a.default("__u"),value:"repeat-x"},{text:a.default("__v"),value:"repeat-y"},{text:a.default("__w"),value:"repeat"}],ifShow:e=>e.backgroundImage}]}}),define("elements/text/designer",["../designer","../../designer/props"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../designer"),a=e("../../designer/props");t.default=i.default.extend({ctor(){this.set({view:"elements/text/index"})}},{type:"text",role:"text",title:"__x",icon:"&#xe6bc;",getProps:()=>({background:"",height:50,alpha:1,text:"",ls:0,forecolor:"#000000",fontsize:14,locked:!1,style:{bold:!1,underline:!1,italic:!1},margin:"0 0 0 0",padding:"0 0 0 0",align:{h:"flex-start",v:"flex-start"}}),props:[{tip:"__y",key:"height",type:a.default.__a_,min:"0"},{tip:"__z",key:"fontsize",type:a.default.__a_,min:"0"},{tip:"__A",key:"alpha",type:a.default.__a_,step:.1,fixed:1,min:"0",max:1},{tip:"__B",key:"ls",type:a.default.__a_,min:"0"},{tip:"__p",key:"background",clear:!0,alpha:!0,type:a.default.__aa},{tip:"__C",key:"forecolor",type:a.default.__aa},{tip:"__D",key:"style",type:a.default.__af},{tip:"__E",key:"align",type:a.default.__ag},{tip:"__F",key:"text",type:a.default.__ah,dockTop:!0},{type:a.default.__ab},{tip:"__j",key:"margin",dockTop:!0,type:a.default.__ae},{tip:"__k",key:"padding",dockTop:!0,type:a.default.__ae},{type:a.default.__ab},{tip:"__l",key:"locked",type:a.default.__ac,refresh:!0,free:!0}]})}),define("elements/text/index",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d,s,o=[],r=e.props;return s="",r.text?s+=" "+r.text+" ":s+=" \u8bf7\u8f93\u5165\u6587\u5b57 ",d=[t(0,s)],l={},a="display:flex;color:"+r.forecolor+";",r.background&&(a+="background:"+r.background+";"),a+="font-size:"+r.fontsize+"px;height:"+r.height+"px;letter-spacing:"+r.ls+"px;opacity:"+r.alpha+";margin:"+r.margin+";padding:"+r.padding+";",r.style.bold&&(a+="font-weight:bold;"),r.style.italic&&(a+="font-style:italic;"),r.style.underline&&(a+="text-decoration:underline;"),a+=";align-items:"+r.align.v+";justify-content:"+r.align.h+";",l.style=a,o.push(t("div",d,l)),t(i,o)},init(e){this.assign(e)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../gallery/mx-dragdrop/index"),l=e("../gallery/mx-pointer/cursor"),d=e("./history");i.default.applyStyle("da",".dH{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:200;position:relative}.dI{top:0;width:1px}.dI,.dJ{position:absolute;background:#fa742b;z-index:200;display:none;pointer-events:none}.dJ{left:0;height:1px}.dK{float:left;overflow:hidden;z-index:200;position:relative}.dL,.dK{width:20px;border-right:1px solid #ccc;background:#fff}.dL{position:absolute;left:0;top:0;height:20px;border-bottom:1px solid #ccc;z-index:201}.dM{left:5px;top:22px}.dM,.dN{cursor:default;position:absolute;font-size:10px}.dN{top:2px;left:24px}.dO,.dP{position:relative;z-index:100}.dO{top:20px}.dP{left:20px}.dQ{width:4px;border-left:1px solid #fa742b}.dQ,.dR{position:absolute;pointer-events:none}.dR{height:1px;background:#fa742b}.dS{position:absolute;left:-15px;top:4px;font-size:10px;color:#666;cursor:pointer;pointer-events:all}.dT{top:2px;cursor:default}.dT,.dU{position:absolute;left:4px;font-size:10px;color:#666}.dU{top:-15px;cursor:pointer;pointer-events:all}.dV{position:absolute;left:4px;top:2px;font-size:10px;color:#666;cursor:default}.dW{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.dX,.dW{position:absolute;overflow:hidden;background:#fa742b;pointer-events:all}.dX{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}");let s={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}};t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s,o)=>{let r,n,c,p,_,u,h,f,g,x=[],b=e.sTop,m=e.id,y=e.yHelpers,v=e.yStart,w=e.scale,k=e.vWidth,A=e.i18n,S=e.sLeft,z=e.xHelpers,T=e.xStart,j=e.vHeight,M=e.width,E=e.step,P=e.space,L=e.hbar,C=e.barColor,O=e.bar,I=e.xEnd,D=e.height,Y=e.yEnd;r=[];for(let e=0,a=y,l=a.length;e<l;e++){let l=a[e];var B=Math.abs(v)+l.mm*w+20;p=[t(0,"\ue600")],c=[t("i",p,{class:"dx dU",title:A("__"),"mx-click":i+"\x1e__v({type:'y',id:'"+o(l.id)+"'})"})],p=[t(0,l.mm)],c.push(t("span",p,{mxa:"d_:_",class:"dV"}),t("span",0,{class:"dW","mx-mousedown":i+"\x1e__z({type:'y',id:'"+o(l.id)+"',c:"+B+"})",title:A("_a")})),n=[t("div",c,{class:"dR",style:"width:"+k+"px;top:"+B+"px;"})],r.push(...n)}x.push(t("div",r,{class:"dP",style:"top:-"+b+"px",id:m+"_y_help","mx-contextmenu":i+"\x1e__A()"})),r=[];for(let e=0,a=z,l=a.length;e<l;e++){let l=a[e];B=Math.abs(T)+l.mm*w;p=[t(0,"\ue600")],c=[t("i",p,{class:"dx dS",title:A("__"),"mx-click":i+"\x1e__v({type:'x',id:'"+o(l.id)+"'})"})],p=[t(0,l.mm)],c.push(t("span",p,{mxa:"d_:a",class:"dT"}),t("span",0,{class:"dX","mx-mousedown":i+"\x1e__z({type:'x',id:'"+o(l.id)+"',c:"+B+"})",title:A("_a")})),n=[t("div",c,{class:"dQ",style:"height:"+j+"px;left:"+B+"px;"})],r.push(...n)}x.push(t("div",r,{class:"dO",style:"left:-"+S+"px",id:m+"_x_help","mx-contextmenu":i+"\x1e__A()"})),p=[];for(let e=0;e<T;e+=E)_=[],e&&(u=[],(g=e/w)%P==0?(h=[t("rect",0,{width:"1",height:L,x:T-e,y:20-L-1,style:"fill:"+C+";"},1)],f=[t(0,-g)],h.push(t("text",f,{x:T-e+2,y:"14",style:"font-size:10px;fill:#999;"})),u.push(...h)):(h=[t("rect",0,{width:"1",height:O,x:T-e,y:20-O-1,style:"fill:"+C+";"},1)],u.push(...h)),_.push(...u)),p.push(..._);for(let e=0;e<I;e+=E)_=[],(g=e/w)%P==0?(u=[t("rect",0,{width:"1",height:L,x:T+e,y:20-L-1,style:"fill:"+C+";"},1)],h=[t(0,g)],u.push(t("text",h,{x:T+e+2,y:"14",style:"font-size:10px;fill:#999;"})),_.push(...u)):(u=[t("rect",0,{width:"1",height:O,x:T+e,y:20-O-1,style:"fill:"+C+";"},1)],_.push(...u)),p.push(..._);c=[t("svg",p,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+M+" 19",style:"cursor:default;"})],n=[t("div",c,{style:"width:"+M+"px;height:100%"})],r=[t("div",n,{class:"dH",id:m+"_x"})],c=[t(0,"-")],n=[t("span",c,{class:"dM",id:m+"_x_tip"})],r.push(t("div",n,{class:"dI",id:m+"_x_line",style:"height:"+(j+20)+"px"})),x.push(t("div",r,{mxa:"d_:b","mx-mousemove":i+"\x1e__o()","mx-mouseout":i+"\x1e__p()","mx-click":i+"\x1e__t()"})),p=[];for(let e=0;e<v;e+=E)_=[],e&&(u=[],(g=e/w)%P==0?(h=[t("rect",0,{width:L,height:"1",x:20-L,y:v-e,style:"fill:"+C+";"},1)],f=[t(0,-g)],h.push(t("text",f,{x:"14",y:v-e+2,style:"font-size:10px;fill:#999;",transform:"rotate(-90,13,"+(v-e)+")"})),u.push(...h)):(h=[t("rect",0,{width:O,height:"1",x:20-O,y:v-e,style:"fill:"+C+";"},1)],u.push(...h)),_.push(...u)),p.push(..._);for(let e=0;e<Y;e+=E)_=[],(g=e/w)%P==0?(u=[t("rect",0,{width:L,height:"1",x:20-L,y:v+e,style:"fill:"+C+";"},1)],h=[t(0,g)],u.push(t("text",h,{x:"14",y:v+e,style:"font-size:10px;fill:#999;;",transform:"rotate(-90,13,"+(v+e-2)+")"})),_.push(...u)):(u=[t("rect",0,{width:O,height:"1",x:20-O,y:v+e,style:"fill:"+C+";"},1)],_.push(...u)),p.push(..._);return c=[t("svg",p,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+D,style:"cursor:default"})],n=[t("div",c,{style:"height:"+D+"px;"})],r=[t("div",n,{class:"dK",style:"height:"+j+"px;",id:m+"_y"})],c=[t(0,"-")],n=[t("span",c,{class:"dN",id:m+"_y_tip"})],r.push(t("div",n,{class:"dJ",id:m+"_y_line",style:"width:"+(k+20)+"px"})),x.push(t("div",r,{mxa:"d_:j","mx-mousemove":i+"\x1e__q()","mx-mouseout":i+"\x1e__r()","mx-click":i+"\x1e__u()"}),t("div",0,{mxs:"d_:_",class:"dL"})),t(i,x)},mixins:[a.default],init(e){let t=i.node(e.scroll);t.addEventListener("scroll",()=>{this.___()},{passive:!0}),this.__a=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let a=this.render.bind(this);i.State.on("___",a),i.State.on("__a",a),i.State.on("__b",a)},__l(){if(this.__b){let e=this.__a,t=i.State.get("__c"),a=Math.max(e.scrollWidth,window.innerWidth)+500,l=Math.max(e.scrollHeight,window.innerHeight)+300,d=0,o=0,r=20,n=0,c=0,p=10,_=10,u=i.node("stage_canvas"),h=i.node("stage_outer"),f=u.getBoundingClientRect(),g=h.getBoundingClientRect();o=a-(d=Math.round(f.left-g.left)+r),c=l-(n=Math.round(f.top-g.top)),p=e.offsetHeight,_=e.offsetWidth;let x=s[t];this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:a,scale:t,space:x.space,step:x.step,height:l,xStart:d,xEnd:o,yStart:n,vHeight:p,vWidth:_,yEnd:c},null,()=>{this.__d=i.node(this.id+"_x"),this.__e=i.node(this.id+"_y"),this.__f=i.node(this.id+"_x_line"),this.__g=i.node(this.id+"_y_line"),this.__h=i.node(this.id+"_x_tip"),this.__i=i.node(this.id+"_y_tip"),this.__j=i.node(this.id+"_x_help"),this.__k=i.node(this.id+"_y_help")})}},___(){let e=this.__d,t=this.__e,i=this.__k,a=this.__j,l=this.__a,d=l.scrollTop,s=l.scrollLeft;e&&(e.scrollLeft=s),t&&(t.scrollTop=d),a&&(a.style.left=-s+"px"),i&&(i.style.top=-d+"px"),this.set({sLeft:s,sTop:d})},render(){this.set({xHelpers:i.State.get("__m"),yHelpers:i.State.get("__n")});let e=()=>{i.node("stage_canvas")?(this.__b=1,this.__l()):setTimeout(e,30)};setTimeout(e,30)},"__o<mousemove>"(e){let t=this.__d,i=e.pageX,a=this.get("xStart"),l=this.__f.style;l.display="block",l.left=i+"px";let d=i-a+t.scrollLeft,s=this.get("scale");this.__h.innerHTML=(d/s).toFixed(0)},"__p<mouseout>"(e){i.default.inside(e.relatedTarget,e.eventTarget)||(this.__f.style.display="none")},"__q<mousemove>"(e){let t=this.root.getBoundingClientRect(),i=e.pageY-t.top,a=this.get("yStart"),l=this.__e,d=this.__g.style;d.display="block",d.top=i+"px";let s=i-a-20+l.scrollTop,o=this.get("scale");this.__i.innerHTML=(s/o).toFixed(0)},"__r<mouseout>"(e){i.default.inside(e.relatedTarget,e.eventTarget)||(this.__g.style.display="none")},"__t<click>"(e){let t=(e.pageX-this.get("xStart")+this.__d.scrollLeft)/this.get("scale")|0,a=this.get("xHelpers");a.push({mm:t,id:i.default.guid("x_")}),this.digest({xHelpers:a}),d.default.__s()},"__u<click>"(e){let t=this.root.getBoundingClientRect(),a=(e.pageY-t.top-this.get("yStart")-20+this.__e.scrollTop)/this.get("scale")|0,l=this.get("yHelpers");l.push({mm:a,id:i.default.guid("x_")}),this.digest({yHelpers:l}),d.default.__s()},"__v<click>"(e){let{type:t,id:i}=e.params,a=t+"Helpers",l=this.get(a);for(let e=l.length;e--;){if(l[e].id==i){l.splice(e,1);break}}this.digest({[a]:l}),d.default.__s()},"__z<mousedown>"(e){if(e.target!=e.eventTarget)return;let t,{type:i,id:a,c:s}=e.params,o=i+"Helpers",r=this.get(o);for(let e of r)if(e.id==a){t=e;break}if(t){let a=this.get(i+"Start"),n=0;this.__w(e,d=>{let c;n||(n=1,l.default.__x(e.eventTarget)),c="x"==i?d.pageX-e.pageX+s:d.pageY-e.pageY+s-20,t.mm=(c-a)/this.get("scale")|0,this.digest({[o]:r})},()=>{n&&(l.default.__y(),d.default.__s())})}},"__A<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){this.__l()}})}),define("designer/const",[],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={__B:50,__c:1,__C:5,__D:150,__E:50,__F:20,__G:30,__H:7,__I:10}}),define("designer/header",["magix","../elements/index","../gallery/mx-dragdrop/index","../gallery/mx-pointer/follower"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../elements/index"),l=e("../gallery/mx-dragdrop/index"),d=e("../gallery/mx-pointer/follower");i.default.applyStyle("db",".dY,.dZ{width:60px;height:40px;display:grid;grid-template-rows:20px 20px;justify-items:center;align-items:center;cursor:pointer;margin:0 2px}.da_{grid-template-columns:50px 10px}.dZ{float:left;border-radius:2px}.dZ:hover{background:#bd361b}.daa{display:none;position:absolute;cursor:default;top:100%;left:0;width:264px;padding:4px}.daa,.dY:hover{background:#e64e30}.dY:hover .daa{display:block}.dab{grid-column:1/2;grid-row:1/2;align-self:flex-end}.dac{font-size:12px;font-weight:400;line-height:12px;grid-column:1/2;grid-row:2/3}.dad{font-size:10px;margin-left:-10px;grid-row:1/3;grid-column:2/3}.dae{height:30px;width:1px;background:-webkit-gradient(linear,left top,left bottom,from(hsla(0,0%,100%,.27)),color-stop(.3,#fff),color-stop(.7,#fff),to(hsla(0,0%,100%,.27)));margin:2px 12px;float:left}"),t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s)=>{let o,r,n,c,p,_,u,h,f,g=[],x=e.i18n,b=e.elements;r=[t(0,"\ue64b")],(o=[t("i",r,{mxs:"da:_",class:"dx da"})]).push(t(0,x("_b")+"\u2122")),g.push(t("div",o,{mxa:"da:_",class:"dE dd"})),o=[];for(let e=0,l=b,d=l.length;e<d;e++){let d=l[e];if(r=[],d.spliter)n=[t("div",0,{class:"dae"})],r.push(...n);else{if(n=[],d.subs){_=[t(0,d.icon,1)],p=[t("i",_,{class:"dx dab"})],_=[t(0,x(d.title))],p.push(t("b",_,{mxa:"da:e",class:"dac"})),_=[t(0,"\ue73a")],p.push(t("i",_,{mxs:"da:b",class:"dad dx"})),_=[];for(let e=0,l=d.subs,o=l.length;e<o;e++){let d=l[e];f=[t(0,d.icon,1)],h=[t("i",f,{class:"dx dab"})],f=[t(0,x(d.title))],h.push(t("b",f,{mxa:"da:g",class:"dac"})),u=[t("div",h,{class:"dZ","mx-mousedown":i+"\x1e__M({ctrl:'"+s(a,d)+"'})"})],_.push(...u)}p.push(t("div",_,{mxa:"da:f",class:"daa"})),c=[t("div",p,{mxa:"da:d",class:"dY da_ dh"})],n.push(...c)}else _=[t(0,d.icon,1)],p=[t("i",_,{class:"dx dab"})],_=[t(0,x(d.title))],p.push(t("b",_,{mxa:"da:i",class:"dac"})),c=[t("div",p,{class:"dY dh","mx-mousedown":i+"\x1e__M({ctrl:'"+s(a,d)+"'})"})],n.push(...c);r.push(...n)}o.push(...r)}return g.push(t("div",o,{mxa:"da:a",class:"dE dd dC dk"})),n=[t(0,"\ue6b0")],r=[t("i",n,{class:"dx"})],n=[t(0,"\u4fdd\u5b58")],r.push(t("b",n,{class:"dac"})),o=[t("div",r,{class:"dY"})],g.push(t("div",o,{mxs:"da:c",class:"dE de dD dk"})),t(i,g)},mixins:[l.default],render(){this.digest({elements:a.default.__J()})},"__M<mousedown>"(e){let{ctrl:t}=e.params;d.default.__K(t.icon),i.State.set({__L:t}),this.__w(e,e=>{d.default.__x(e),i.State.fire("__c",{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY})},e=>{d.default.__y(),e&&i.State.fire("__d"),i.State.set({__L:null})})}})}),define("designer/history",["magix","./const"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("./const");let l=[],d=[],s=null,o=-1,r="",n=null,c=()=>JSON.stringify({page:i.State.get("__N"),scale:i.State.get("__c"),layouts:i.State.get("__O"),select:i.State.get("__P"),xLines:i.State.get("__m"),yLines:i.State.get("__n")}),p=e=>{let t=JSON.parse(e),a=i.State.get("__c"),l=t.scale||a;i.State.fire("__e",{json:t}),i.State.fire("___",{scale:a!==l})};t.default={__Q(){n||(n=c())},__R:()=>({canRedo:d.length,canUndo:l.length}),__S(){l.length=0,d.length=0},__T(){if(l.length>0){let e=l.pop();d.push(e);let t=l[l.length-1]||n;p(t)}},__U(){let e=d.pop();e&&(l.push(e),p(e))},__s(e="_save",t=0){let p=c();e!=r&&s&&(l.push(s),s=null,r=e),d.length=0;let _=e=>{l.push(e),l.length>a.default.__B&&(n=l.shift()),i.State.fire("__f")};t?(s=p,clearTimeout(o),o=setTimeout(()=>{_(s),s=null},t)):_(p)}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index","./header","./toolbar","./axis","./stage"],(e,t)=>{e("./header"),e("./toolbar"),e("./axis"),e("./stage"),Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../elements/index"),l=e("../gallery/mx-dialog/index"),d=e("./const"),s=e("./history"),o=e("../panels/index");let r=a.default.__V();i.default.applyStyle("dc",".daf{background:#fa742b;height:40px;line-height:40px;font-size:16px;padding:0 10px;color:#fff;z-index:202}.daf,.dag{position:relative}.dag{padding:0 26px;background:#fafafa;color:#333;height:26px;z-index:201;border-bottom:1px solid #eee}.dah{width:calc(100% - 20px);overflow:scroll;height:calc(100% - 85px);background-color:#edeef3;transition:all .3s;margin-left:20px}.dai{box-shadow:inset 1px 1px 6px 2px #dadada}");t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d)=>{let s=[],o=e.id;return s.push(t("div",0,{mxs:"db:_","mx-view":"designer/header",class:"daf"}),t("div",0,{mxs:"db:a","mx-view":"designer/toolbar",class:"dag dk"}),t("div",0,{"mx-view":"designer/axis?scroll=s_"+d(o),class:"dk dh"}),t("div",0,{"mx-view":"designer/stage",id:"s_"+o,class:"dah dl dai"})),t(i,s)},mixins:[l.default],init(){i.State.on("__e",e=>{(e=>{let t=i.State.get("__N"),l=i.State.get("__O"),d=i.State.get("__P"),s=i.State.get("__m"),o=i.State.get("__n"),{elements:r,map:n}=a.default.__W(e.layouts);l.length=0,l.push(...r),s.length=0,e.xLines&&s.push(...e.xLines),o.length=0,e.yLines&&o.push(...e.yLines);let c={};if(d.length=0,e.select)for(let t of e.select){let e=n[t.id];e&&(c[e.id]=1,d.push(e))}i.default.mix(t,e.page),i.State.set({__c:e.scale||1,__X:c})})(e.json)}),i.State.set({__Y:r,__N:r.getProps(),__c:d.default.__c,__O:[],__P:[],__X:{},__m:[],__n:[]}),s.default.__Q()},render(){this.digest(null,null,()=>{o.default.__Z()})}})}),define("designer/keys",[],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DELETE:8,TAB:9,Z:90,Y:89}}),define("designer/props",[],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={__a_:2,__aa:4,__ab:8,__ac:16,__ad:32,__ae:64,__af:128,__ag:256,__ah:512,__ai:1024,__aj:2048}}),define("designer/service",["magix"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");let a=i.default.Service.extend((e,t)=>{let i=e.get("method")||"GET";fetch(e.get("url"),{method:i,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(i=>{e.set("data",i.data),t()}).catch(e=>{t({msg:e.message})})});a.add([{name:"__ak",url:i.default.config("getBackgroundImageUrl")}]),t.default={ctor(){let e=this;e.on("rendercall",()=>{delete e.__al})},request(e){e=e||i.default.guid("r");let t=new a;return this.capture(e,t,!0),t},fetch(e,t){let i=JSON.stringify(e);this.request(i).all(e,t)},save(e,t){let i=this,a=JSON.stringify(e);i.lock(a,()=>{i.request(a+"_request").save(e,t)})},lock(e,t){this.__al||(this.__al={});let i=this.__al;i[e]||(i[e]=t,t())},unlock(e){let t=this.__al;t&&delete t[e]}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./workspace"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../gallery/mx-dragdrop/index"),l=e("./history"),d=e("./keys"),s=e("./workspace");i.default.applyStyle("dd",".daj{outline:0;display:flex;position:relative}.dak{padding:50px 240px 50px 120px}.dal{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}.dam{height:3px;background:#fa742b;position:absolute;display:none;pointer-events:none;margin-top:-1px;transition:all .08333333s}"),t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s)=>{let o,r,n,c,p,_,u=[],h=e.page,f=e.scale,g=e.layouts,x=e.id;p=[];for(let e=0,l=g,d=l.length;e<d;e++){let d=l[e];_=[t("div",0,{mxv:"layouts",class:"dh",id:d.id,"mx-view":"elements/"+d.ctrl.role+"/designer?element="+s(a,d),"mx-mousedown":i+"\x1e__ao({element:'"+s(a,d)+"'})",role:"layout",eid:d.id})],p.push(..._)}return c={class:"dal"},n="min-width:"+h.width*f+"px;min-height:"+h.height*f+"px;background:"+h.background+";",h.backgroundImage&&(n+="background-image:url("+h.backgroundImage+");background-repeat:"+("full"==h.backgroundRepeat?"no-repeat":h.backgroundRepeat)+";background-size:","full"==h.backgroundRepeat?n+="100% 100%":n+=h.backgroundWidth*f+"px "+h.backgroundHeight*f+"px;"),c.style=n,c.id="stage_canvas",r=[t("div",p,c)],(o=[t("div",r,{mxa:"dc:a",class:"dak"})]).push(t("div",0,{class:"dam",id:x+"_bar"})),u.push(t("div",o,{mxa:"dc:_",class:"daj",id:"stage_outer","mx-contextmenu":i+"\x1e__A()","mx-mousedown":i+"\x1e__aq()",tabindex:"0","mx-focusin":i+"\x1e__au()","mx-focusout":i+"\x1e__av()","mx-keydown":i+"\x1e__at()"})),t(i,u)},mixins:[a.default],init(){let e=e=>{let t=i.State.get("__O");e?this.digest({layouts:t}):this.set({layouts:t})},t=this.render.bind(this);i.State.on("___",t),i.State.on("__a",t),i.State.on("__b",e),e(),s.StageDragDrop.__am(this.root,this.id)},render(){let e=i.State.get("__N");this.digest({scale:i.State.get("__c"),page:e})},"__ao<mousedown>"(e){"layout"!=e.from&&s.StageElements.__an(e,this)},"__aq<mousedown>"(e){let t=e.target;i.default.inside(i.node("stage_canvas"),t)&&(e.shiftKey||e.metaKey||e.ctrlKey||s.StageSelectElements.__ap()&&l.default.__s())},"__at<keydown>"(e){e.metaKey||e.ctrlKey?e.keyCode==d.default.Z?(e.preventDefault(),e.shiftKey?l.default.__U():l.default.__T()):e.keyCode==d.default.Y&&(e.preventDefault(),l.default.__U()):e.keyCode==d.default.TAB?(e.preventDefault(),s.StageElements.__ar(e)):e.keyCode==d.default.DELETE&&(e.preventDefault(),s.StageElements.__as()&&(i.State.fire("__b"),l.default.__s()))},"__A<contextmenu>"(e){e.preventDefault()},"__au<focusin>"(e){this.root.classList.remove("dai")},"__av<focusout>"(){this.root.classList.add("dai")}})}),define("designer/toolbar-del",["magix","./workspace","./history"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("./workspace"),l=e("./history");t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d,s=[],o=e.elements,r=e.i18n;var n=o.length;return s.push(t("i",0,{mxs:"dd:_",class:"daq"})),d=[t(0,"\ue600")],l={},a="dx dao",(n<1||o[0].props.locked)&&(a+=" dar"),l.class=a,l.title=r("_c")+"(Delete)",l["mx-click"]=i+"\x1e__aw()",s.push(t("i",d,l)),t(i,s)},init(){let e=this.render.bind(this);i.State.on("___",e),i.State.on("__g",e),i.State.on("__h",e)},render(){this.digest({elements:i.State.get("__P")})},"__aw<click>"(e){e.eventTarget.classList.contains("dar")||a.StageElements.__as()&&(i.State.fire("__b"),l.default.__s())}})}),define("designer/toolbar-do",["magix","./history"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("./history");t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l,d,s=[],o=e.status,r=e.i18n;return d=[t(0,"\ue682")],l={},a="dx dao",o.canUndo||(a+=" dar"),l.class=a,l.title=r("_d"),l["mx-click"]=i+"\x1e__ax({s:'-',b:"+o.canUndo+"})",s.push(t("i",d,l)),d=[t(0,"\ue682")],l={},a="dx dao dB",o.canRedo||(a+=" dar"),l.class=a,l.title=r("_e"),l["mx-click"]=i+"\x1e__ax({s:'+',b:"+o.canRedo+"})",s.push(t("i",d,l)),t(i,s)},init(){let e=this.render.bind(this);i.State.on("___",e),i.State.on("__f",e)},render(){this.digest({status:a.default.__R()})},"__ax<click>"(e){if(e.eventTarget.classList.contains("dar"))return;let{s:t,b:i}=e.params;i&&("-"==t?a.default.__T():a.default.__U())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("../panels/index");t.default=i.default.View.extend({tmpl:(e,t,i,a,l,d,s,o)=>{let r,n,c,p,_=[],u=e.panels,h=e.i18n;for(let e=0,a=u,l=a.length;e<l;e++){let l=a[e];p=[t(0,l.icon,1)],c={},n="dx dao",l.opened&&(n+=" dap"),c.class=n,c["mx-click"]=i+"\x1e__az({id:'"+o(l.id)+"'})",c.title=h(l.opened?"_f":"_g",l.title),r=[t("i",p,c)],_.push(...r)}return t(i,_)},init(){i.State.on("__i",()=>{this.render()})},render(){this.digest({panels:a.default.__ay()})},"__az<click>"(e){let{id:t}=e.params;a.default.__az(t)}})}),define("designer/toolbar",["magix","./toolbar-do","./toolbar-del","./toolbar-panels"],(e,t)=>{e("./toolbar-do"),e("./toolbar-del"),e("./toolbar-panels"),Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("de",".dan{height:22px}.dao{cursor:pointer;height:22px;width:22px;margin:0 2px;display:inline-flex;align-items:center;justify-content:center;border-radius:2px}.dao:hover{background:#e6e6e6;color:#333}.dap,.dap:hover{background:#c4c4c4}.daq{height:16px;width:1px;background:#eee;margin:3px 12px;float:left}.dar{color:#aaa;cursor:not-allowed}.dar:hover{color:#aaa;background:transparent}"),t.default=i.default.View.extend({tmpl:(e,t,i)=>{let a,l=[];return(a=[t("div",0,{class:"dan","mx-view":"designer/toolbar-do"})]).push(t("div",0,{class:"dan","mx-view":"designer/toolbar-del"})),l.push(t("div",a,{mxs:"dg:_",class:"dd dE db"})),a=[t("div",0,{class:"dan","mx-view":"designer/toolbar-panels"})],l.push(t("div",a,{mxs:"dg:a",class:"de db dE"})),t(i,l)},render(){this.digest()}})}),define("designer/workspace",["magix","./history","../gallery/mx-pointer/follower","../gallery/mx-dragdrop/index","../gallery/mx-runner/index","./const"],(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),a=e("./history"),l=e("../gallery/mx-pointer/follower"),d=e("../gallery/mx-dragdrop/index"),s=e("../gallery/mx-runner/index"),o=e("./const");t.StageSelectElements={__ap(e){let t=i.State.get("__P"),a=t.length;if(a||e){let l=a>1?null:t[0];t.length=0;let d=!1;if(e?(t.push(e),d=e!=l):a&&(d=!0),d)return i.State.set({__X:i.toMap(t,"id")}),i.State.fire("__g"),!0}},__aA(e){let t=i.State.get("__P"),a=!1;for(let i of t)if(i.id===e.id){a=!0;break}if(!a)return t.push(e),i.State.set({__X:i.toMap(t,"id")}),i.State.fire("__g"),!0},__aB(e){let t=i.State.get("__P"),a=!1,l=-1;for(let i of t)if(l++,i.id===e.id){a=!0;break}if(a)return t.splice(l,1),i.State.set({__X:i.toMap(t,"id")}),i.State.fire("__g"),!0},__aC(e){let t=i.State.get("__P");t.length=0,e&&t.push.apply(t,e),i.State.set({__X:i.toMap(t,"id")}),i.State.fire("__g")},__aD(e){let t=i.State.get("__X"),a=0;for(let i in e)if(!t[i]){a=1;break}if(!a)for(let i in t)if(!e[i]){a=1;break}return a}},t.StageElements={__M(e){let a=e.ctrl,l=a.getProps(),d={id:i.default.guid("e_"),type:a.type,role:a.role,ctrl:a,props:l};e.elements.splice(e.index,0,d),t.StageSelectElements.__ap(d)},__aE(e,t){let a=(e,i)=>{let l=0,d=!1;for(let s of e){if(i&&null==s)e.splice(l,1),d=!0;else{if(!i&&s.id==t.id){e.splice(l,1,null),d=!0;break}if("layout"==s.role)for(let e of s.props.columns)if(a(e.elements,i),d)break}l++}},l=i.State.get("__O");a(l),e.elements.splice(e.index,0,t),a(l,!0)},__aF(e){let t=i.State.get("__O"),a={},l={},d=(e,t,i)=>{let s=0;for(let o of e){if(a[o.id]={pId:t,index:s,elements:e,type:i},l[o.id]=o,"layout"==o.role)for(let e of o.props.columns)d(e.elements,o.id,o.role);s++}};d(t,0,"stage");let s=e,o=e;do{l[s].props.locked&&(o=s),s=a[s].pId}while(i.has(a,s));let r=a[o];return{entity:l[o],pInfo:r}},__an(e,d){let{element:s}=e.params,{entity:o}=this.__aF(s.id),r=i.State.get("__P");if(void 0!==e.button&&0!=e.button){let e=!1;for(let t of r)if(t.id===s.id){e=!0;break}return void(e||t.StageSelectElements.__ap(o)&&a.default.__s())}let n=!1;for(let e of r)o.id==e.id&&(n=!0);if(n||(t.StageSelectElements.__ap(o)&&a.default.__s(),r.length=0,r.push(o)),o.props.locked)return;let c=o.ctrl;l.default.__K(c.icon),d.__w(e,t=>{e.preventDefault(),l.default.__x(t),i.State.fire("__c",{pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,moved:o})},e=>{l.default.__y(),e&&i.State.fire("__d")})},__as(){let e=i.State.get("__P"),a=i.State.get("__O"),l=!1;if(e.length){let d=i.toMap(e,"id"),s=e=>{for(let t,i=e.length;i--;)if(!(t=e[i]).props.locked)if(d[t.id])l=!0,e.splice(i,1);else if("layout"==t.role)for(let e of t.props.columns)s(e.elements)};s(a),l&&t.StageSelectElements.__ap()}return l},__ar(e){let l=i.State.get("__P"),d=i.State.get("__O");if(d.length){let i=l.length,s=l[0];if(0===i||i>1)s=d[e.shiftKey?d.length-1:0],t.StageSelectElements.__ap(s);else{let i=null,l=null,o=null,r=null,n=!1,c=s.id,p=e=>{for(let t of e)if(t.id==c?(n=!0,i=t):i&&!l?l=t:n?r=t:o=t,"layout"==t.role&&!t.props.locked)for(let e of t.props.columns)p(e.elements)};p(d);let _=null;e.shiftKey?o?_=o:"layout"==(_=d[d.length-1]).role&&r&&(_=r):_=l||d[0],_.id!=s.id&&(t.StageSelectElements.__ap(_),a.default.__s())}}}};t.StageDragDrop={__am(e,l){let r=null,n=null,c=null,p=null,_=null,u=this,h=0,f=0,g=null,x=()=>{n=null,p=null,r=null,_=null},b=()=>{let t=e.getBoundingClientRect(),i=e.scrollWidth>e.clientWidth+o.default.__F,a=e.scrollHeight>e.clientHeight+o.default.__F;g.pageY>t.top&&g.pageY<t.top+t.height&&g.pageX>t.left&&g.pageX<t.left+t.width&&(i||a)?t.top+t.height-o.default.__E<g.pageY?e.scrollTop+e.clientHeight+o.default.__F<e.scrollHeight?++h>o.default.__I&&(c.display="none",x(),e.scrollTop+=o.default.__H):h=0:t.top+o.default.__E>g.pageY?e.scrollTop<o.default.__F?h=0:++h>o.default.__I&&(x(),e.scrollTop-=o.default.__H,c.display="none"):t.left+o.default.__D>g.pageX?e.scrollLeft<o.default.__F?h=0:++h>o.default.__I&&(x(),e.scrollLeft-=o.default.__H,c.display="none"):t.left+t.width-o.default.__D<g.pageX&&e.scrollLeft+e.clientWidth+o.default.__F<e.scrollWidth?++h>o.default.__I&&(c.display="none",x(),e.scrollLeft+=o.default.__H):h=0:h=0};i.State.on("__c",e=>{if(g=e,f||(f=1,s.default.__aG(o.default.__G,b)),h)return;let t=d.default.__aI(e.clientX,e.clientY);if(t!=n){n=t,c||(c=i.node(l+"_bar").style),p||(p=i.node("stage_outer").getBoundingClientRect());let a=u.__aJ(t,e.moved);r=a||null}if(r){let t=u.__aK(r,e);t?(_=t,c.left=t.rect.left-p.left+"px",c.top=t.rect.top-p.top+"px",c.width=t.rect.width+"px",c.display="block"):(_=null,c.display="none")}else c&&(_=null,c.display="none")}),i.State.on("__d",()=>{h=0,f&&(f=0,s.default.__aH(b)),_&&(c.display="none",r.moved?t.StageElements.__aE(_,r.moved):t.StageElements.__M(_),i.State.fire("__b"),a.default.__s()),x()})},__aK(e,{pageY:t}){let a=!1,{entity:l,subIndex:d,ctrl:s,moved:r}=e;if(r&&"stage"!=e.role){let e=t=>{if(t.id==l.id)a=!0;else if("layout"==t.role)for(let i of t.props.columns){for(let t of i.elements)if(e(t),a)break;if(a)break}};e(r)}if(a)return;let n=(e.layout||e.node).getBoundingClientRect(),c={left:n.left,top:n.top,width:n.width,height:n.height};if("stage"==e.role){let t=e.elements.length;return t&&(c.top+=c.height),{ctrl:e.ctrl,elements:e.elements,index:t,rect:c}}if("layout"==e.role){let i=e.index;return c.top+c.height/2<t&&(c.top+=c.height,i++),{ctrl:e.ctrl,elements:e.ownerList,index:i,rect:c}}if("column"==e.role){let a=e.index,p=c.top+o.default.__C>=t,_=c.top+c.height-o.default.__C<=t;if(_&&(a++,c.top+=c.height),p||_)return{ctrl:e.ctrl,elements:e.ownerList,index:a,rect:c};p=(c={left:(n=e.node.getBoundingClientRect()).left,top:n.top,width:n.width,height:n.height}).top+o.default.__C>=t;let u,h=l.props.columns[d].elements,f=h.length;if(f){if(p?(a=0,u=h[0]):(a=f,u=h[f-1]),r&&r.id==u.id)return;c={left:(n=i.node(u.id).getBoundingClientRect()).left,top:n.top+(p?0:n.height),width:n.width,height:n.height}}else a=0;return{elements:h,ctrl:s,index:a,rect:c}}{let i=e.index;return c.top+c.height/2<t&&(c.top+=c.height,i++),{ctrl:e.ctrl,elements:e.ownerList,index:i,rect:c}}},__aJ(e,a){let l=i.State.get("__L"),d=i.node("stage_canvas");if((l||a)&&i.default.inside(e,d)){let s=i.State.get("__O");if(e==d){let e=s[s.length-1],t=d;if(a&&e.id==a.id)return;return e&&(t=i.node(e.id)),{moved:a,elements:s,ctrl:l,role:"stage",node:t}}{let s="";do{if(s=e.getAttribute("role"))break;e=e.parentNode}while(e!=d);if(s){let o=e.getAttribute("column"==s?"pid":"eid"),{entity:r,pInfo:n}=t.StageElements.__aF(o);if(a&&a.id==r.id)return;r.props.locked&&(s=(e=i.node(r.id)).getAttribute("role"));let c=-1,p=null;if("column"==s)for(c=0|e.getAttribute("index"),p=e;p!=d&&"layout"!=p.getAttribute("role");)p=p.parentNode;return{ctrl:l,role:s,moved:a,subIndex:c,layout:p,entity:r,index:n.index,ownerList:n.elements,node:e}}}}return null}}});